(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{424:function(t,s,e){"use strict";e.r(s);var a=e(14),n=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"需要注意的点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#需要注意的点"}},[t._v("#")]),t._v(" 需要注意的点")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("ScrollView")]),t._v("与"),s("code",[t._v("FlatList")]),t._v("和"),s("code",[t._v("SectionList")]),t._v("的区别")]),t._v(" "),s("ul",[s("li",[t._v("ScrollView会直接渲染内部所有元素，这对于元素较多的视图而言，会影响加载速度")]),t._v(" "),s("li",[t._v("FlatList和SectionList初次渲染的时候不会渲染屏幕以外的元素")])])]),t._v(" "),s("li",[s("p",[t._v("Animated")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("不是所有动画都支持原生加速"),s("code",[t._v("useNativeDrive")]),t._v("，只有非布局属性才有用，比如"),s("code",[t._v("transform")]),t._v("和"),s("code",[t._v("opacity")])]),t._v(" "),s("blockquote",[s("p",[t._v("but flexbox and position properties will not")])])]),t._v(" "),s("li",[s("p",[t._v("当使用"),s("code",[t._v("Animated.event")]),t._v("的时候，只会作用在直接元素上，而不会响应冒泡事件")])]),t._v(" "),s("li",[s("p",[t._v("当一个动画运行的时候，它可以阻止"),s("code",[t._v("VirtualizedList")]),t._v("组件呈现更多行，所以当用户在滑动列表的时候，如果你需要执行一个长事件持续的动画的时候，可以使用"),s("code",[t._v("isInteraction: false")]),t._v("来解决这个问题")])])])])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("在安卓上，某些"),s("code",[t._v("transform")]),t._v("相关的属性需要通过添加"),s("code",[t._v("perspecive")]),t._v("来启动")]),t._v(" "),s("div",{staticClass:"language-jsx line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("View")])]),t._v(" \n\t"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("transform")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("scale")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("scale"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rotateY")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rotateY"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("perspective")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v("    \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("FlatList")]),t._v(" "),s("ul",[s("li",[t._v("当某行滑出视图之后，其内部状态将不会保留")]),t._v(" "),s("li",[t._v("因为异步渲染的原因，滑动过快的话，会出现短暂的白屏")])])])]),t._v(" "),s("h3",{attrs:{id:"一个元素如何成为手势响应者"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一个元素如何成为手势响应者"}},[t._v("#")]),t._v(" 一个元素如何成为手势响应者")]),t._v(" "),s("p",[t._v("只要实现了正确的协商方法，就可以成为触摸事件的响应者。")]),t._v(" "),s("h4",{attrs:{id:"发起询问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#发起询问"}},[t._v("#")]),t._v(" 发起询问")]),t._v(" "),s("ul",[s("li",[t._v("在用户开始触摸的时候，手指接触屏幕的瞬间，是否愿意成为响应者："),s("strong",[t._v("onStartShouldSetResponder: () => true")])]),t._v(" "),s("li",[s("strong",[t._v("onStartShouldSetResponderCapture")]),t._v("在捕获阶段夺权")]),t._v(" "),s("li",[t._v("如果不是响应者，在每一个触摸点移动的时候在询问一下： "),s("strong",[t._v("onMoveShouldSetResponder: () => true")])]),t._v(" "),s("li",[s("strong",[t._v("onMoveShouldSetResponderCapture")]),t._v("：在捕获阶段夺权")])]),t._v(" "),s("h4",{attrs:{id:"成为响应者之后-触发以下事件之一"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#成为响应者之后-触发以下事件之一"}},[t._v("#")]),t._v(" 成为响应者之后，触发以下事件之一")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("View.props.onResponderGrant: (evt) => {}")]),t._v(" - View 现在要开始响应触摸事件了。这也是需要做高亮的时候，使用户知道他到底点到了哪里")]),t._v(" "),s("li",[s("code",[t._v("View.props.onResponderReject: (evt) => {}")]),t._v(" - 响应者现在“另有其人”而且暂时不会“放权”，请另作安排")])]),t._v(" "),s("h4",{attrs:{id:"开始响应-下面的事件将会一一触发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开始响应-下面的事件将会一一触发"}},[t._v("#")]),t._v(" 开始响应，下面的事件将会一一触发")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("View.props.onResponderMove: (evt) => {}")]),t._v(" - 用户正在屏幕上移动手指时（没有停下也没有离开屏幕）。")]),t._v(" "),s("li",[s("code",[t._v("View.props.onResponderRelease: (evt) => {}")]),t._v(' - 触摸操作结束时触发，比如"touchUp"（手指抬起离开屏幕）。')]),t._v(" "),s("li",[s("code",[t._v("View.props.onResponderTerminationRequest: (evt) => true")]),t._v(" - 有其他组件请求接替响应者，当前的 View 是否“放权”？返回 true 的话则释放响应者权力")]),t._v(" "),s("li",[s("code",[t._v("View.props.onResponderTerminate: (evt) => {}")]),t._v(" - 响应者权力已经交出。这可能是由于其他 View 通过"),s("code",[t._v("onResponderTerminationRequest")]),t._v("请求的，也可能是由操作系统强制夺权（比如 iOS 上的控制中心或是通知中心）")])]),t._v(" "),s("p",[s("code",[t._v("evt")]),t._v("是一个合成事件，它包含以下结构：")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("nativeEvent")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("changedTouches")]),t._v(" - 在上一次事件之后，所有发生变化的触摸事件的数组集合（即上一次事件后，所有移动过的触摸点）")]),t._v(" "),s("li",[s("code",[t._v("identifier")]),t._v(" - 触摸点的 ID")]),t._v(" "),s("li",[s("code",[t._v("locationX")]),t._v(" - 触摸点相对于当前元素的横坐标")]),t._v(" "),s("li",[s("code",[t._v("locationY")]),t._v(" - 触摸点相对于当前元素的纵坐标")]),t._v(" "),s("li",[s("code",[t._v("pageX")]),t._v(" - 触摸点相对于根元素的横坐标")]),t._v(" "),s("li",[s("code",[t._v("pageY")]),t._v(" - 触摸点相对于根元素的纵坐标")]),t._v(" "),s("li",[s("code",[t._v("target")]),t._v(" - 触摸点所在的元素 ID")]),t._v(" "),s("li",[s("code",[t._v("timestamp")]),t._v(" - 触摸事件的时间戳，可用于移动速度的计算")]),t._v(" "),s("li",[s("code",[t._v("touches")]),t._v(" - 当前屏幕上的所有触摸点的集合")])])])])])}),[],!1,null,null,null);s.default=n.exports}}]);