(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{341:function(t,s){t.exports="data:image/png;base64,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"},342:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYoAAAC2CAIAAABI010lAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAB2XSURBVHic7Z1fTFtZfsfPtCttu9oBe8XsDrtbY2YZuZod7FHoKhNpIYgs9QNmipKoGomJa2meUrCEiLXpCJQHBIqoTIRkorxaZpBGFSC2Ng8WDQKyUma0Ilo7o11dTTZc3G5JO6g2jrTVvPXhNzk9uf98fW3Mgfl+xIO5f84999/3/s7vnPP7vfLXb/8NAwAA+fizk64AAAAYA3kCAEgK5AkAICmQJwCApECeZGExlYzFxmspIRIJZ9Jr9BeJhPUbxGLjmfRajUcBoGF866QrcDJEIuGrVy6HBoekLdAByWQqmUwxxjLptXqVKcN5yYOzq5FIzLd7vfR7T1Wj0TFNgfR7eWWVbl8tq84Y31B5+mYSj9+Jx++cdC2+WcxMTzHGuKItppIz01MTk7cYY7HYeO/Fnhuxm4qicMUhrXG26uyBxh0Ax0hTc1P5qMz/LR2V+O+A37+1vaMoCmMsmUztqWpX17laVp09KlhPJNX8X9GsFVdtbe/wz3IsNt7W5llYuDcXn6UlotInFu5msxtiCbTWQYEVz82w8uJC3gjK5fL0QWMvW87icrNqVCzQ7Lz0NTw+rJsDzi6U2XklEvP7+4W2Ng+1aDTNGQtmpqcCAb/+QM4KtN7L7FiO77IZu7uPrl65HIuNx+N3YrHxdq/3RuwmY8zn87ndrnR6nTYLBvt5A9DZqjOJlTxFIuHeiz2GLW26W7TK5/PRveQPaLvXOxefpfs6Mz01Ono9Gh1LJlOX+vp6uru5PAX8/lwuL2pTVQVan5hZ5amBY+ZECAb73+zoEKsRiYT5y2xYDesCLc5LXMUYW0wlrc+oFizcUs4ulPX96r3Ys7W9E42O6a+hGTPTUx6Phx8ok17jjSBnBdJeuVyeyhRbVdbHcnCXLaArn0mv9V7sKRZLfF+v18MYo4efnFOJhbvR0RGfz+dslZ0P9qmjcuPOsA8o4Pcvr6zSb0VRtrZ32to84gbcwPniyRMu8Pc3N/knKxjsd7tdqcWlWgp0VnkLstkN/pgqilIsllpaWmqphsV59V7s4atOnGovlPX9yuXyJFWG11CPz+cLBPwfLy3xJcsrq/xRcVAg34vfzVw+7/F47ByLOX3YDAkG+zPpta3tndDgUOmolEmvBYP9mrX7+wXDL6WDVWcMK+spmUwdHBxER0eoXSA2Ctxu19Url3l7gTFWLJbE31zL+XebfnNDt6e7e09V+WbOCnRWeWssur0cVMPsvHw+H2Ps4ODATpWOFWcXyvp+VQsZBapa4EvoyhyHUVDxWA7usgUfDA9zbY1GxxKJ+VBogDcgoqMjXApbW1sZY4qiUA2rXVVLJaWlgu8pm92gSxkM9kdHR5jQR+CsR3Nreyfg9zPGAgF/YuGuuKruXaQWlTdjMZUUnRR1aXAZnpdUz5ODC8Xqer9ILLxeD78sdX/r3C4XuaUbcKyXjut23d/c5P+Wj8pkxGWzG9HREe7kZoy92dGxp6qOV51J7Pbccb0ncrm8+OW0Tzq97na7ZqanisWSWKbjAu2gqTx78cE0bNHwfpZYbNztdtk8hFmBFue1p6qh0AD9Xkwl9cdKJObNBlgeE/YvVH3vl6Ioe6r6wfAwX3L1yuWt7Z16lR8M9gcC/t3dRzUey+KxMaNYLF3q6+P/BgL+QuFrw21re6f3Yg/Z0VTDTGa9llVnDyvrSezdYC9/LScmb81MT4ntIE2flBmKouRy+UDAr3G7OC7QQeUZY9nsRmdnJ2+ecCfFx0tL0dERqkYul7f/XTIr0OK8otExGuHNGEss3OVSxdnfL7R7vV1d52waKeIpU024JWhzlf0LVff7RQ0fXmCNpRGBgJ8XKHYZOz6W2dWw4Fo4sphKGh6LfvAuQrGGzladPV5BvCdpoV4q+x3zQCSRmC8flSvKB5AZDMuUl/C1YcbYGTbdAbAGk1pkhI8ksjkAFYAzCRp3AABJQeMOACApkCcAgKRAngAAkgJ5AgBICnruAGg0M9NTTc1N1sPZgsF+Gm+5mErm8nn9wFE+oFeMUMRejNukMHiaqc6cYrF0LRyp8SwaAOQJAOmgyY+tra0UmyEev2M47Ym9mDBIpNPrc/HZx48ft7a2ejye6ZnbcwE/jU2hAinCQSQSFufZyIytxh1NXxBnMPh8vkx6LZGYZ4wtppLHGquokTg7L4u9Eol5+o5VhUVSg4r5DqqtYd33OtVIcqGy2Y3lldWrVy73XuzhsV8SC3cplF1ocCixcHdPVUODQ+IMJEVRlldWKfjE9Mxtm8eyqDxFbmnwxE8RW/GeAgH/jdhNMbgMjRUUo5SeDZydV92vRjKZCg0OGUbzsVhlgSTn5QB6ecRPYyw2fnxCeXwXamZ6Sv+hovef5vdqoOnHyyurZlPqXM0GxtTDh58xxsSQBnPx2Ux6jQJR0JXUzOW2qHw2u0FSePXKZcNKHjeV5amlpUUMzKSndFQSIyifGZydl/xX4zSe156qNv4DXscLRTHwdh480CzPZjeKxRLNXhKJRMLR0ZFisfRmR4f9Q/NJmmJoZjIsKHgRfdgsgiAaVp4qeeHCefs1qReV5cntMg4qUiyWiiWp30NnODsv+a/GqT6v3d1HDXOXHMeFGhwc0EQQ4lAIWTGEJmOsq+tcYuHux0tLFBxKj6oW9K6oyYmPKORxsVjSFFhL5U8QW65xQ8OPe/7FDohgsP+D4eFcPt97sWdPVSkOvNhNYD8vgFnaBc0qs8wFTBcqhAlT2CyqYXhemjL1USzs7MV0AfktquEMswj/FWtohtlemngAmt6lOmbQoN8HBweloxLvzBIxfABqeQ6P4wEI+P1iUDoRisEvhtDkhVDiA8O9CE00UbEzrrOzU4wIao2zZ6MBVJanpuam/X2758kYc7tdbW0eitDOGLsRuzkXn6UHyyJ+vkXaBYtVFpkLYrHxQMDPuyquXrms0SazMP4Vr4b9S0EEAn4KyK+voeNqGGId4b9h1DeDBt93d/eR5h1mlg+As+ewIg4egEgk7Ha7LIJ23d/cvHrlsl58qdFnGNGYlogxPzmJxLzb7eKNHi73TAhUXW3k5dJRdc3MemHVuKOQXZnMerXvzMLCPfqhCQZSMd+BhX/BcJVF5oK2Nk8ul6ff9GTwxnPFalgQjY6FBoeqCgDGP+maGtZSDT12Ivw3kjpm0CCSyZSr2aVx0FqnrnD8HFrg4AG41NdnHY0zmUwViyVNPEL6vhaLJYovrqdYLImjCojFVNLV7Nra3uEyWpXvyYxodOyLJ0/og1ftvrVgZT3Rt2sxlezs7HT2VdeYlxbx8y0C8lvH6jfLXLC/X+DWO70q1KlhXY1GcnqzCVhT9wwanFw+PziojSlqJ2O7/eew7pDpVPH10RhQPAXk6Oh1vQYRhUJBY9EsppKFQmFi8haNz1QUxazzt9og8Zpcxw2jcuOuUCiYeccdYBE/3yIgv9mqipkLxFiu4lsqSWb605VNwD51z6BB0OjEXD7PlzhOXdGwB6Cr65wda4WSGPEskG6XS/PEut0uLrLBYH8oNKDvLtAMBOcXnyNKeVWhxDwej5nv7FixNSzTQXvbEJvx8y0sZ/0qs8wFZMCTNauxxmsJ408jVKvqFjFDqmwC1aZd4BlH2Atnh+Fm9cqgwSkUCpTpR6wJ/bCfuqKRDwAloLWzZWhwiDdUJyZviZcuGOwXTctsdqPd63348DO322VWk/JRmUYt0Z/YuKO/UxHmsKGTWizi51sE5LdYZZG5gKxl8Snkx6oljH+9lNq6Gs6SGtSSTaDatAsTk7f4aEmNCB5HBg3OzoMHNCCI/nWWuuLEHwD7hdDYy57ubp7fhb0wEi9cOJ/L5fXdBYyxtjZPVd1Z0lI5Wib1+MrW42gNdceIL4am8w5oQNqF44Z3ERJ2MqzQLpQ5irYnn9Sequ7vF9wuV2pxiTYgbeWjJWgIhbVXrqp7vZhK3t/cbLw/pLL1dHh4SHm1TtGLre/sICfiKTqFBoO0C8eNmaPaEO42Inswl8uTlsXjdw4PD0WZEB1b8fgd0Qaslyc7GOx3u128Z6mR2Io1zs31U5TTXRytx05PBInGg7QLwAyukifVlYRUCAAASUG0TACApJjK0+8f/6aR9QAAAA2wngAAkgJ5AgBICuQJACApkCcAgKRAngAAkgJ5AgBICuQJACApkCcAgKRAngAAkgJ5AgBICuQJACApkCcAgKRAngAAkgJ5AgBICuQJACApkCcAgKRAngAAkgJ5AgBICuQJACApkCcAgKQgkRQAQFJgPQEAJAXyBACQFMgTAEBSIE8AAEmBPAEAJAXyBACQFMgTAEBSIE8AAEmBPAEAJAXyBACQlFeeP39+0nUAAAADYD0BACTlFfZPvz/pOgAAgAGwngAAkoKAKgAASYH1BACQFMgTAEBSIE8AAEmBPAEAJAXyBACQFMgTAEBSIE8AAEmBPAEAJAXyBACQFMgTAEBSIE8AAEmBPAEAJOXPW77/Q8c7/2L4rff+8Z3vuv7i6eMv61gnAABgsJ4AANKCgCoAAEmB9QQAkJRvWa/+xfBbb//8R/zfz3/9x39b+h1j7N3QT94deIMWfrr+9NPMH8S9xLVP81/+673f0u/3b54//I/nLT9+9XVvE2PsmVr+ZPYzfqCWH7+69S/K+7/8GS355J9/82yvRHv9qfwVL+TD2z37nx9SNRhj711/5w3/a/pjAQBOO1byRNo0f32D/v3wdg9f9WnmDyRJY/f6NXu99e4Pv/9Xr9Jer7e73v/lz94N/YTr19s//9Hnv/7jJ7Of6Ve97m16/5c/I1V67/o7vX/v4+JlxnvX33nN08RrOHav/73r70ChADgbWDXu3v75jz5df1ptib/79D+5QDzbKz0vffXd5m/ztU/zX5Lho1/FBIvpv//9OVlYFrze7nrD/9rDXz3hSz5df8otKQDAacfUenq93cUYKx/+r4NC9SaVHZ6XviJtYoJ1ZsH3fvAdxtj//Nef+BKq7evtLl4OAOD0YipP9IY3tfxltSV+eLtHdCqJTcL6QsL0vR98h4sR1RbaBMDZwKpx90wte3/aQr8/vN3zquvbFhuL/Kn8Ff34xfBb9veyKO01z9cNvfdvnucFPtsrPVPLF/6ug2/57sAbn//6jzUeDgAgCVau8U9mPxu7108ttU/Xn3KpYi/3l7078Ma7A29wi+nhr5787T/8lPZ6mv/ymVqusYr/eu+3vBoa9flk9rP3b57nbUnesQgAOANUMSxT06MPAADHCoZlAgAkBfIEAJAUzLkDAEgKrCcAgKRAngAAkgJ5AgBICuQJACApkCcAgKRAngAAkmIlT4nEfCa9lkmvNaw2nMVUMhYbP6bCI5EwnVcmvRaJhPUbxGLjmfTa8VXAPsFgfya9lkjMn3RFADgBrOQpGh0LDQ4Vi6WZ6amGVagBJJOp0OBQaHCoMYcjNWzMsQA4S1QI5ssYu7+5efXK5QZURR7i8Tvx+J2TrgVjjGWzG9nsxknXAoCTobLv6eDggDFm2AgCAIDjo7L1FAoNMMa6us4lkyk7JSYS8/v7hbY2T7vXyxjbU9VodIyvnZmeCgT89DuXy09M3uKrYrHx3ovGsevEVVvbO/ZNG7FVtbyyWvEUIpEwNxX125tVw+yUxe15TTRnbYh4lfS7aC5Uw1qpADSYCvLk8/navd5cLh8I+H0+n6Iodgrtvdiztb0TjY75fL65+GwkEqb3fGZ6yuPx8Ncpk16bmZ6iF49eOb5qMZXkpYmrqEDGWEWFoi3taIFIMpmiquq9RdbVMDxlaiSS5FUlImKdNX7xSCQsXigAzjAVGneDgwPFYonelgsXztssNJfL03urKEqxWGppaWGM+Xy+QMD/8dIS32x5ZZXbCL0Xe5ZXVg1LC/j9fJWiKFvbO21tnop1CF8b3lPVqrTJGutqGJ7y8YG2NvgmUMF6IqOAMZbL5e237wzxej2MMVUt8CXk1fL5fOK/etxu19Url0X3fLFYOZp4U3NT+ajWQJ21V6PuJJOpg4OD6OgI1cROixWAU4qVPNEnmoyCnQcPoqMj9tt3ekiYvF4PL6G1tZUxZqdABy9h+ajc1FwhFVW1SKIFvDsvGOyPjo4wxmSoFQB1x6pxd6mvL5fL0296HwYHBxwfSVGUPVX9YHiYL7l65TKZZoyxPVUlHzxjbDGVdLtdfLNcLu9gZMPOgwftXm8dh1Y6qwar1PVJY1+d1RNjDsDZxtR6ikTCbrdL4yqi99PxmKBodIzeRvpX7PyKRsf4CPXEwl0uVYyxiclbM9NToq/aTucdvbrR0RHeycVtH7FfjNprvK/NYpWzalBNOjs7ecNQ4613NbvMdzVA06kniUEHwHGAaJmyk0jMl4/KdfTxA3BawJRgGeGDCYLB/navd+fBg5OtDwAnQuVhmaDx7O4+4q3IxMJd+JjANxM07gAAkoLGHQBAUiBPAABJgTwBACQF8gQAkJQKPXeJxHwms67vOaIQIhaDEg03oNn8mhArMkAVuxG7aX/KDgUwqGqXGpmZnmpqbrK+dMFgP92sxVQyl8/rbxAf+MrvKQ1Ypy0pLKo47FOkWCxdC0dqPAsA7FNBnnZ3H0VHR1pbW1taWjTBmNq9XnGJZvhyu9ebyaxrSpuc+CixcPeD4WHruXs0lcxmzBAe28SaipFVcrn8XHzW5kEpqsnyymrDtMkOdN3oZjHG4vE7mulBHJrtSKTT63Px2cePH7e2tno8numZ23MBP8mueCMikfClvr6GnQsArKI8keJc6uu7Fo6In2IL6ymRmKeobNHRkejoCP/kJhLz9zc36aM9OfGR9Xc4l8svppL2v9WiFROLjbe1eTQx8PS7GMb/1iw0nDISDPbT9BRNAAPOSQVjymY3WltbqUqJhbu0MLFwV1ULpLzBYH8oNKCxvxRFWV5ZpanFN2I3G19tAMyoPCyTR2jTfIo11hN/J6PRsVhs3O1yaWKq7e4+onKy2Y2e7m4eiE4PzchPJOYttqkL1iMexZB4HIotZzjbjmwNrgt1gYRVcxHoQIbtSpp+vLyyanZehlP8Hj78jE5KURSKbyMapFyyTySADPgmU4Vr/Fo4QglOQoNDe6q6tb3D/9XYC21tni+ePOH/ZtJrrmbX1SuXefqmQMDf1NxknR8pk1kPBPzBYH+1p3R8zExPXb1ymYLSaWIMzExPkTaZ6YKDfFAUwE8/oyWb3SgWS+Frw5rlkUiYzNU3OzqqOgo5BMWPzY3YzdDgEEkt3V+zYIEAHB9W1hM3lxILd8n4F9FYT9y5Q/F/FxbuZdJrN2I35+KzZrPqZ6anEol5M19vZ2cnYywUGrAzpUPvftI003hkGMeIkYjplaYmJP0uFkt1b9NRqFLD06f0OdwRTnR1nSNBEaPWiKhqQe+Kmpz4iIzBxVQyGOwX4wUCcLJYyRO5fug9t//uDQ4O7Kkq/5cUivtoeJMkGOwPBPwWxQb8/q3tnd6LPZqX0BAHvqdqEVtYiqKEBod4BBg7UU0ciFfA77+/uWm4KplMXerr02g3nbLP5zN0h3M0/RKig6+zsxPyBOShiinBYhYTDeL76Xa52r1eMmcoGQF78XLSyzwzPfXFkydmoXuJYLDf7Xal0+vMtgHlAHLeO9iRdxdWlTamKijeloXqGRpQjDFq9Bn2jdISMWApJ5GYd7tdbtfXugbfE5CB6iIWGI580biQeROPRhIxxuZMxtFYEAoN7KmqoiiKomTSa3YMKAdYj1oydI1rkjj1XuzRJ7+qSyvvUl8fDyVqiKEBFYuNBwL+YrFkqEGMsWKxJI4qIOhMxeQOGFgAZKA6eXK7Xc7ycVe1FwU54p3cW9s7FgYUZVio1vdE/VPWo5Y0QkyeuK3tnT1VNRtUwYN/1wiZThXtMo0BxUeKjo5e12sQUSgUNI7zxVSyUChMTN4iZz+1W/U78g5cABpG/a0nEcPGXUU+GB7O5fJcO8hrG4uNG76ura2tmlrZ8T1duHC+2qYKP0S1HXAO6Oo6Z6enLJlMXb1yuae7m+TJ7XIlFu6Kmut2u7gviQY97e4+0hhBmhuqV1jxrjVylDwAduWJBi7ZsZ74sEz2YpjfXMBv33qil18z0md65vZcfDadXte/G11d5wqFqr25b3Z0ONirFjLpNfuzeexP+hEtHf3wqGKxxIcyZbMb0dGRhYV7hh4ronxU5mlgWJXD9wGoO7bkKTo6Qh9zM+tJ9HPz/iOxwSVaT/QWGQ5ompmeavd69e8DjWzWT4ujZqCDkZCBgL++4ycbgP28WDT2sqe7W5RgMnIvXDify+UNG8ttbZ79fXTbAYmoIE+U/og7R8VV4iByZ35rTfOKCjT7VieTqZaWlrn4rDj0sae7O5fLmx1dtONEMYrFxs3GE9nE0CNujTMbRKPydiSVBha0tLRwCab0X6WjUi6ff7OjI7W4NBef5Y1l7uwvFkvR+JjezhWXSDidG5xhjiuY70s9d/FZGsFExhdPhSRO011MJUtHpYqPPjU3auzOX0wlP15acixPFvMNT7Y1xN1G5LwX5xVFImHRsU1fGri6geQg1jgAQFIQjg4AICmQJwCApECeAACSAnkCAEgK5AkAICnHK0+LqaT9YCaJxDyNbxah+cD1rpcxwWA/jfGJxcbtVzsSCVtM6wEAOKZyphY+snFPVRcW7hnmHTBMNEDzWqdnbtusSvmoPDp6XRz6FImE7YyfNByIRNHjqsoswqenpdPr4WvDmfQa5nMAcIJUntRCYyBpni0t0cwsMTQ0fD4fBYcyS6OiH1o5MXlrMZWMRMKarDD6ccx2JqZOTN7KpNc0wxFtoijKxOQtn88nzk3jo0k5FbO/AABqobqIBYZ4PJ5cXhsqd3LiI/qhD79Nk1cMR13f39zs6joXjY7F43ccjMDWB8wTk6mINbGIfKJRw87OTqoqKRGFPSKjbDGV5BuLeyEfHAB1wbk8iUEUNVpDM1SuhSMUnJ+/4SQfe6pq9vaKQYU+GB6mecgWOsUtGgp8vryyGhocWkwl729u8nL08VU4+jIpPrrNmCF0FpryY7HxgL/q8HsAAD2V5YlPfxUjiDPzOa6x2DiFN2Mv5CaTXuONNbNcJtzJRRtQaLSK7TI6isb3dC0coSAKVE5bm2dh4V7F06wjpSMEvQWgDjjxPendSeJEdtGS0vtroqMjPd3depcN7c4tsoDfr4ktJf42U0ZxGzGOOFVY7yoSt6fTFMPg8jCShsfiuF2u8lHZehsAgAOcNO6WV1a5/4XpXONioJXllVX96z0zPcV1wcy7LLb+7Dihei/2BPz/n/fFIlElR/QQJRLzh4eHjLHS0dehuO13OzY1NyFMEgDHgRN5oqSyvFfL4/F8vLTE1+r9Spn0mtimq2NvF28SavoBQ6EBMRywHk0obp47t3xUbmlpoW5HyppbsQ7tXm8ms87/hTEFQL1w6HvK5fIU4poiB2ncSYZtOk1PmUVuOP3uzKghxl40CSn+r3WQbPayhLW0tGg8RBTws1gqtbV5Jic+2lNV65BSmfTa1vbO4eFhjZHtAABmVJYn0hHR98QYo4iLPp/vUl+fPlWkaB8Zdpxp4v9a7M5sx3ijINk8DB43fDQdeYTb5eItMjFvZTq9Til/qcKRSJgGOvAtaZgCH7FJImVdMQCAMyrIE2/1aFAUZWt7Zy4+u6eqFv1rkUiYUhtplosZRMSNbVS4AjTeiiTmWjhC8qGvIQW65WbanqqSBUQ5LHmI7jc7OnhLjRqSokomEvN6IwuuKADqRQV5crtdZmYOGVNm+kUmT7FY0ls9NIdO49ahl58ynht27dmEe774mEn9KKRYbJz0SNMoo+2pDhSKu6m5aXf3Ea3VG4DMyNHW7vXyXQAAtWAlTxZT3mjgZWhwiLrhRM83hdbXCJNmPLc+iVv5qEwtstDgUCIxbx2Qn/f3cfMnk1nX5O/l7Tufz0f7cm9XwO8XffnsRWR07pyisZ20l+F4zkx6TRMonTcPi8USYngDUBesYo1TbjvGGCnL1vYOuWbYy25mereRwwMAUF+QCgEAICkIRwcAkBTIEwBAUiBPAABJgTwBACQF8gQAkBTIEwBAUiBPAABJgTwBACQF8gQAkBTIEwBAUiBPAABJgTwBACQF8gQAkBTIEwBAUv4PxdMO9Cp3wr4AAAAASUVORK5CYII="},343:function(t,s,a){t.exports=a.p+"assets/img/client2.4c6dc495.png"},509:function(t,s,a){"use strict";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),s("p",[t._v("基于前面两篇的内容，我们现在已经能够实现一个极简易的控制台聊天室。它的功能非常简单，在控制台启动服务端之后，通过其他控制台，打开客户端，能够彼此收发消息。下面就开始相关逻辑的编写")]),t._v(" "),s("h2",{attrs:{id:"第一步-编写基础的逻辑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一步-编写基础的逻辑"}},[t._v("#")]),t._v(" 第一步，编写基础的逻辑")]),t._v(" "),s("p",[t._v("与前面两节一样，我们先实现一个基本的连接事件")]),t._v(" "),s("details",{staticClass:"custom-block details"},[s("summary",[t._v("server 端")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" net "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'net'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" net"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" socketSets "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connection'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("socket")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 连接成功的时候保存socket")]),t._v("\n  socketSets"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 客户端发送消息")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nserver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'server started, listen on port 8000'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br")])])]),t._v(" "),s("p",[t._v("这里选择 set 结构，是因为相比数组，能更好的对集合进行迭代和删除等操作")]),t._v(" "),s("details",{staticClass:"custom-block details"},[s("summary",[t._v("client 端")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" net "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'net'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" socket "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" net"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nsocket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connect'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'服务连接成功'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nsocket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])])]),t._v(" "),s("p",[t._v("这样，就实现了一个基础的结构，每当有一个 client 连接进来的时候，都会在 server 端的控制台下打印一个 Hello。")]),t._v(" "),s("p",[t._v("下面来继续填充逻辑，我们已经在每一个 client 连接进来的时候，将其收集起来了，因此要实现聊天室的功能，只需要在每一个客户端发送消息的时候，将其发送给其他所有的客户端就可以了。")]),t._v(" "),s("p",[t._v("但现在，面临的问题是，如何在控制台自由的输入文本")]),t._v(" "),s("h2",{attrs:{id:"repl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#repl"}},[t._v("#")]),t._v(" repl")]),t._v(" "),s("p",[t._v("nodejs 提供了"),s("a",{attrs:{href:"http://nodejs.cn/api/repl.html#replstartoptions",target:"_blank",rel:"noopener noreferrer"}},[t._v("repl"),s("OutboundLink")],1),t._v("模块，可供在代码中调用终端的输入功能")]),t._v(" "),s("p",[t._v("先来看看"),s("code",[t._v("repl")]),t._v("的基本使用")]),t._v(" "),s("details",{staticClass:"custom-block details"},[s("summary",[t._v("repl")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" repl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'repl'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" instance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" repl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("eval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cmd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cmd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])])]),t._v(" "),s("p",[t._v("其中"),s("code",[t._v("eval")]),t._v("就是我们处理输入的主要方法，默认值是 js 的 eval 方法。")]),t._v(" "),s("img",{staticStyle:{width:"60%"},attrs:{src:a(341)}}),t._v(" "),s("h2",{attrs:{id:"实现-client-的交互"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实现-client-的交互"}},[t._v("#")]),t._v(" 实现 client 的交互")]),t._v(" "),s("p",[t._v("现在我们已经能够在控制台进行简单的交互了， 同时，为了使得每一条消息中都带有发送者的信息，因此，我们在创建 client 之前，需要先输入一个用户名。在这里我们就采用简单的一点的实现方式")]),t._v(" "),s("details",{staticClass:"custom-block details"},[s("summary",[t._v("输入用户名提示")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" readline "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'readline'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" readline"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createInterface")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("input")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stdin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stdout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nrl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("question")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'请输入用户名：'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("answer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  rl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("answer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("exit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])])]),t._v(" "),s("p",[t._v("在拿到用户名之后，就要创建连接了，我们将之前写的 socket 的处理封装到一个函数中，方便在拿到用户名之后直接调用。因此现在大致代码如下：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" net "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'net'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" readline "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'readline'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" client "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" userName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("createSocket")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" socket "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" net"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connect'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'服务连接成功'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" readline"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createInterface")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("input")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stdin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" process"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stdout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nrl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("question")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'请输入用户名：'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("answer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  rl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  userName "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" answer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  client "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createSocket")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br")])]),s("p",[t._v("可以看到 client 是作为全局变量的存在，主要是为了方便方法的调用，比如我们现在创建一个发送消息的方法")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("message")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  lient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      username"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("p",[t._v("现在我们就只需要调用 send 方法，就可以直接发送消息了，修改一下 connect 事件中的默认消息，将他改为由 send 发送")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connect'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'服务连接成功'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("效果如下：")]),t._v(" "),s("img",{staticStyle:{width:"60%"},attrs:{src:a(342)}}),t._v(" "),s("p",[t._v("现在，就可以来实现发送消息的功能了，我们可以直接将上一步的 repl 功能封装到函数中，同样的，在 connect 事件发生的时候来调用")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRepl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  repl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("prompt")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("eval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cmd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" message "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cmd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nsocket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connect'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'服务连接成功'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRepl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])]),s("p",[t._v("接着要做的就是在 eval 函数中，得到输入值之后将他发送出去，这里我们就可以直接调用 send 方法")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("eval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cmd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" message "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cmd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("trim")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("效果如下：")]),t._v(" "),s("img",{staticStyle:{width:"60%"},attrs:{src:a(343)}}),t._v(" "),s("h2",{attrs:{id:"server-端修改"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#server-端修改"}},[t._v("#")]),t._v(" server 端修改")]),t._v(" "),s("p",[t._v("现在 client 端已经可以发送消息了，多个 client 端都没关系，不过多个 client 端之间还无法通信，我们还要来实现一下 server 端，让他能够正常的去推送消息")]),t._v(" "),s("p",[t._v("修改 server.js 中对 socket 的 data 事件为如下代码")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 客户端发送消息")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" message "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'server端收到消息'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  socketSets"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("client")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("client "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])]),s("p",[t._v("这样在客户端就能收到其他人发的消息啦。最后我们调整一下客户端收到的消息的格式")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("socket"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'data'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("msg")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" userName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" message "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("userName"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(": ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("message"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("最终实现下来，整个程序还是有一些瑕疵，比如，如何使得 prompt 提示与其他人发送的消息能够更清晰的分开。")])])}),[],!1,null,null,null);s.default=e.exports}}]);