---
title: 文件共享
date: 2020-10-12
categories:
  - 工具
---

## 前言

在此之前，与服务器完成文件传输的主要工具是`ssh`、`FTP`等手段。后来了解到[`bashupload`](https://bashupload.com/)，上传文件后可以得到 7 天的免费存储时间。不过文件总归是存在在别人的服务器上。后来终于等来了 croc

## bashupload

```bash
curl https://bashupload.com/name.txt --data-binary @file.txt
```

<!-- more -->

## Croc

[github](https://github.com/schollz/croc)地址

### 安装

直接通过命令行安装最新版本

> curl https://getcroc.schollz.com | bash

- MacOS

  > brew install croc

- windows > scoop install croc

  > choco install croc

- ubuntu > snap install croc

### 使用

- 发送文件

```bash
croc send [file(s)-or-folder]
Sending 'file-or-folder' (X MB)
Code is: code-phrase
```

- 接收文件

```bash
croc code-phrase
```

- 自定义 code

```bash
croc send --code myfile [file(s)-or-folder]
Sending 'file-or-folder' (X MB)
Code is: myfile
```

- 管道

```bash
cat [filename] | croc send
```

- 直接发送文本

```bash
croc send --text 'hello'
```

- 自主中继

我觉得是最主要的功能，默认情况下，croc 使用公共中继，也可以开启自己的中继

```bash
croc relay
```

会占用`9009-9013`端口

> 您可以自定义端口（例如 croc relay --ports 1111,1112），但是中继必须至少有 2 个端口。第一个端口用于通信，随后的端口用于多路复用数据传输

使用中继发送文件

```bash
croc --relay 'youhost.com:9009' send [filename]
```

使用 docker

```
docker run -d -p 9009-9013:9009-9013 -e CROC_PASS='YOURPASSWORD' schollz/croc
```

在接收文件的时候确保密码正确

```
croc --pass YOURPASSWORD --relay 'youhost.com:9009' [code]
```

注意 如果需要在 docker 的宿主机上发送文件，需要修改 docker 容器占用的端口，否则在宿主机上发送文件的时候会提示端口被占用，例如：

```
docker run -d -p 9109-9113:9009-9013 -e CROC_PASS='YOURPASSWORD' schollz/croc
```

## ffsend

> [ffsend](https://github.com/timvisee/ffsend)是[send 项目](https://github.com/timvisee/send)的命令行版本，项目起源于`Mozilla`的一个分支

### 使用

- 上传

  ```bash
  $ ffsend upload 1.txt --copy
  # Advanced upload
  # - Specify a download limit of 1
  # - Specify upload expiry time of 5 minutes
  # - Enter a password to encrypt the file
  # - Archive the file before uploading
  # - Copy the shareable link to your clipboard
  # - Open the shareable link in your browser
  $ ffsend upload --downloads 1 --expiry-time 5m --password --archive --copy --open my-file.txt
  Password: ******
  https://send.vis.ee/#sample-share-url

  # Upload to your own host
  $ ffsend u -h https://example.com/ my-file.txt
  https://example.com/#sample-share-url
  ```

  上传结果会返回一个文件地址，默认的服务器实例是`https://send.vis.ee`，该实例拥有网页版，还有其他[实例](https://github.com/timvisee/send-instances)

- 下载

  ```bash
  $ ffsend download [link]
  ```

- 检查文件是否存在

  ```bash
  $ ffsend exists [link]
  ```

- 查询远程文件的信息

  ```bash
  $ ffsend info [link]
  ```

- 修改上传文件的密码

  ```bash
  $ ffsend password [link]
  ```

- 删除文件

  ```bash
  $ ffsend delete [link]
  ```

### 如何搭建自己的实例

- [Docker 方式搭建](https://github.com/timvisee/send/blob/master/docs/docker.md)
