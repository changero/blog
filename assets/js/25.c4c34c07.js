(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{322:function(l,v,_){l.exports=_.p+"assets/img/webpack.732317d8.png"},450:function(l,v,_){"use strict";_.r(v);var i=_(14),e=Object(i.a)({},(function(){var l=this,v=l._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":l.$parent.slotKey}},[v("blockquote",[v("p",[l._v("初步整理的 webpack 知识图谱")])]),l._v(" "),v("p",[v("img",{attrs:{src:_(322),alt:""}})]),l._v(" "),v("h1",{attrs:{id:"webpack"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#webpack"}},[l._v("#")]),l._v(" webpack")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("功能")]),l._v(" "),v("ul",[v("li",[l._v("通过持久缓存提高构建性能")]),l._v(" "),v("li",[l._v("使用更好的算法和默认值来改善长期缓存")]),l._v(" "),v("li",[l._v("通过更好的 tree shaking 和代码生成来改善 bundle 的大小")]),l._v(" "),v("li",[l._v("清除处于怪异状态的内部结构，同时在 v4 中实现功能而不引入任何重大更改")]),l._v(" "),v("li",[l._v("通过引入重大更改来为将来的功能做准备，以使我们能更长时间的使用 v5")])])])]),l._v(" "),v("h2",{attrs:{id:"资源"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#资源"}},[l._v("#")]),l._v(" 资源")]),l._v(" "),v("ul",[v("li",[v("p",[v("a",{attrs:{href:"https://www.bilibili.com/video/BV1e7411j7T5",target:"_blank",rel:"noopener noreferrer"}},[l._v("https://www.bilibili.com/video/BV1e7411j7T5"),v("OutboundLink")],1)])]),l._v(" "),v("li",[v("p",[v("a",{attrs:{href:"https://webpack.wuhaolin.cn/",target:"_blank",rel:"noopener noreferrer"}},[l._v("https://webpack.wuhaolin.cn/"),v("OutboundLink")],1)])])]),l._v(" "),v("h2",{attrs:{id:"工具链"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#工具链"}},[l._v("#")]),l._v(" 工具链")]),l._v(" "),v("h3",{attrs:{id:"webpack-cli"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#webpack-cli"}},[l._v("#")]),l._v(" webpack-cli")]),l._v(" "),v("h3",{attrs:{id:"webpack-dev-server"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#webpack-dev-server"}},[l._v("#")]),l._v(" webpack-dev-server")]),l._v(" "),v("h3",{attrs:{id:"webpack-merge"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#webpack-merge"}},[l._v("#")]),l._v(" webpack-merge")]),l._v(" "),v("h3",{attrs:{id:"chain-webpack"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#chain-webpack"}},[l._v("#")]),l._v(" chain-webpack")]),l._v(" "),v("h3",{attrs:{id:"webpack-bundle-analyzer"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#webpack-bundle-analyzer"}},[l._v("#")]),l._v(" webpack-bundle-analyzer")]),l._v(" "),v("h2",{attrs:{id:"概念"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[l._v("#")]),l._v(" 概念")]),l._v(" "),v("h3",{attrs:{id:"插件"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#插件"}},[l._v("#")]),l._v(" 插件")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("生命周期")])]),l._v(" "),v("li",[v("p",[l._v("如何实现")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("tapable")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("SyncHook")])]),l._v(" "),v("li",[v("p",[l._v("SyncBailHook")]),l._v(" "),v("ul",[v("li",[l._v("前面的钩子有返回值将中断执行")])])]),l._v(" "),v("li",[v("p",[l._v("AsyncParallelHook")]),l._v(" "),v("ul",[v("li",[l._v("异步并行")])])]),l._v(" "),v("li",[v("p",[l._v("AsyncSeriesHook")]),l._v(" "),v("ul",[v("li",[l._v("异步串行")])])])])]),l._v(" "),v("li",[v("p",[l._v("plugin 都是一个 class 实现")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("实现 apply 方法")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("complier")])]),l._v(" "),v("li",[v("p",[l._v("compilation")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("在 additionalAssets 阶段")]),l._v(" "),v("ul",[v("li",[l._v("compilation.assets 添加文件")]),l._v(" "),v("li",[l._v("compialtion.emitAsset")])])])])]),l._v(" "),v("li",[v("p",[l._v("每一个 hook 都是 tabable 对象，可以 tap 和 call")])])])])])]),l._v(" "),v("li",[v("p",[l._v("RawSource")]),l._v(" "),v("ul",[v("li",[l._v("webpack.sources")])])])])]),l._v(" "),v("li",[v("p",[l._v("常用插件")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("html-webpack-plugin")])]),l._v(" "),v("li",[v("p",[l._v("web-webpack-plugin")]),l._v(" "),v("ul",[v("li",[l._v("方便的为单页应用输出 HTML，比 html-webpack-plugin 好用")])])]),l._v(" "),v("li",[v("p",[l._v("extract-text-webpack-plugin")]),l._v(" "),v("ul",[v("li",[l._v("提取 CSS 到单独的文件")])])]),l._v(" "),v("li",[v("p",[l._v("webpack.definePlugin")])]),l._v(" "),v("li",[v("p",[l._v("clean-webpack-plugin")]),l._v(" "),v("ul",[v("li",[l._v("每次重新构建的时候会自动清空掉上一次构建的产物")])])]),l._v(" "),v("li",[v("p",[l._v("copy-webpack-plugin")])]),l._v(" "),v("li",[v("p",[l._v("optimize-css-assets-webpack-plugin")]),l._v(" "),v("ul",[v("li",[l._v("压缩 css")])])]),l._v(" "),v("li",[v("p",[l._v("i18n-webpack-plugin")]),l._v(" "),v("ul",[v("li",[l._v("给你的网页支持国际化")])])]),l._v(" "),v("li",[v("p",[l._v("imagemin-webpack-plugin")]),l._v(" "),v("ul",[v("li",[l._v("图片压缩")])])]),l._v(" "),v("li",[v("p",[l._v("prepack-webpack-plugin")]),l._v(" "),v("ul",[v("li",[l._v("通过 Facebook 的 Prepack 优化输出的 JavaScript 代码性能")])])]),l._v(" "),v("li",[v("p",[l._v("dll-plugin")]),l._v(" "),v("ul",[v("li",[l._v("借鉴 DDL 的思想大幅度提升构建速度。")])])]),l._v(" "),v("li",[v("p",[l._v("webpack-parallel-uglify-plugin")]),l._v(" "),v("ul",[v("li",[l._v("多进程执行 UglifyJS 代码压缩，提升构建速度。")])])]),l._v(" "),v("li",[v("p",[l._v("add-assets-html-webpack-plugin")]),l._v(" "),v("ul",[v("li",[l._v("自动在 html 引入打包的文件")])])])])])]),l._v(" "),v("h3",{attrs:{id:"loader"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#loader"}},[l._v("#")]),l._v(" loader")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("如何实现")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("loader 本质是一个函数")]),l._v(" "),v("ul",[v("li",[l._v("function(content, map, meta)")]),l._v(" "),v("li",[l._v("this.callback")]),l._v(" "),v("li",[l._v("return convertContent")])])]),l._v(" "),v("li",[v("p",[l._v("loader.pitch")])]),l._v(" "),v("li",[v("p",[l._v("异步 loader")]),l._v(" "),v("ul",[v("li",[l._v("const callback = this.asyc()")])])]),l._v(" "),v("li",[v("p",[l._v("获取 options")]),l._v(" "),v("ul",[v("li",[l._v("const { getOptions } = require('loader-utils')")]),l._v(" "),v("li",[l._v("const options = getOptions(this)")])])]),l._v(" "),v("li",[v("p",[l._v("校验 options")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("创建 schem.json 文件")]),l._v(" "),v("ul",[v("li",[l._v("子主题 1")])])]),l._v(" "),v("li",[v("p",[l._v("引入 schema-utils")])]),l._v(" "),v("li",[v("p",[l._v("validate(schema, options, config)")])])])])])]),l._v(" "),v("li",[v("p",[l._v("作用")]),l._v(" "),v("ul",[v("li",[l._v("常见的 loader 做了什么")])])]),l._v(" "),v("li",[v("p",[l._v("常用 loader")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("css")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("style-loader")]),l._v(" "),v("ul",[v("li",[l._v("拿到 css-loader 处理过的模块内容，添加到 style 标签中")])])]),l._v(" "),v("li",[v("p",[l._v("css-loader")]),l._v(" "),v("ul",[v("li",[l._v("提取 CSS 文件内容导出一个 Commonjs 规范的模块")])])]),l._v(" "),v("li",[v("p",[l._v("less-loader")])]),l._v(" "),v("li",[v("p",[l._v("scss-loader")])]),l._v(" "),v("li",[v("p",[l._v("stylus-loader")])]),l._v(" "),v("li",[v("p",[l._v("postcss-loader")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("plugins")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("postcss-preset-env")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("帮助 postcss 找到 browserslist")]),l._v(" "),v("ul",[v("li",[l._v("package.json 中的 browserslist")]),l._v(" "),v("li",[l._v(".browserslistrc")])])])])]),l._v(" "),v("li",[v("p",[l._v("autoprefixer")])])])]),l._v(" "),v("li",[v("p",[l._v("postcss.config.js")])])])]),l._v(" "),v("li",[v("p",[l._v("extract-text-webpack-plugin")]),l._v(" "),v("ul",[v("li",[l._v("提取 CSS 到单独文件")])])]),l._v(" "),v("li",[v("p",[l._v("mini-css-extract-plugin")]),l._v(" "),v("ul",[v("li",[l._v("loader 属性取代 style-loader")])])])])]),l._v(" "),v("li",[v("p",[l._v("html")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("html-loader")]),l._v(" "),v("ul",[v("li",[l._v("处理 html 文件中的图片资源，传递给 url-loader 处理")]),l._v(" "),v("li",[l._v("使用 Commonjs 模块解析，需要关闭 url-loader 的 esModule")])])])])]),l._v(" "),v("li",[v("p",[l._v("js")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("语法检查")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("esint-loader")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("airbnb")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("eslint-config-airbnb-base")]),l._v(" "),v("ul",[v("li",[l._v("extends airbnb-base")])])])])])])])])]),l._v(" "),v("li",[v("p",[l._v("兼容性处理")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("babel-loader")]),l._v(" "),v("ul",[v("li",[l._v("@babel/core")]),l._v(" "),v("li",[l._v("@babel/preset-env")]),l._v(" "),v("li",[l._v("@babel/preset-react")])])]),l._v(" "),v("li",[v("p",[l._v("语法兼容")])]),l._v(" "),v("li",[v("p",[l._v("API 兼容")]),l._v(" "),v("ul",[v("li",[l._v("@babel/polyfill")])])])])]),l._v(" "),v("li",[v("p",[l._v("其他")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("ts-loader")])]),l._v(" "),v("li",[v("p",[l._v("awesome-typescript-loader")]),l._v(" "),v("ul",[v("li",[l._v("性能要比 ts-loader 好")])])])])])])]),l._v(" "),v("li",[v("p",[l._v("img")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("url-loader")]),l._v(" "),v("ul",[v("li",[l._v("默认使用 ES6module 解析")]),l._v(" "),v("li",[l._v("esModule: false")])])]),l._v(" "),v("li",[v("p",[l._v("file-loader")])])])]),l._v(" "),v("li",[v("p",[l._v("其他")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("raw-loader")]),l._v(" "),v("ul",[v("li",[l._v("处理文本文件")])])]),l._v(" "),v("li",[v("p",[l._v("source-map-loader")]),l._v(" "),v("ul",[v("li",[l._v("加载额外的 source map 文件")])])]),l._v(" "),v("li",[v("p",[l._v("svg-inline-loader")]),l._v(" "),v("ul",[v("li",[l._v("把压缩后的 SVG 内容注入到代码中")])])]),l._v(" "),v("li",[v("p",[l._v("node-loader")]),l._v(" "),v("ul",[v("li",[l._v("加载 Node.js 原生模块 .node 文件")])])]),l._v(" "),v("li",[v("p",[l._v("image-loader")]),l._v(" "),v("ul",[v("li",[l._v("加载并且压缩图片文件")])])]),l._v(" "),v("li",[v("p",[l._v("json-loader")]),l._v(" "),v("ul",[v("li",[l._v("加载 JSON 文件")])])]),l._v(" "),v("li",[v("p",[l._v("yaml-loader")]),l._v(" "),v("ul",[v("li",[l._v("加载 YAML 文件")])])])])])])]),l._v(" "),v("li",[v("p",[l._v("从后往前调用")])])]),l._v(" "),v("h3",{attrs:{id:"打包链路"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#打包链路"}},[l._v("#")]),l._v(" 打包链路")]),l._v(" "),v("ul",[v("li",[l._v("1、初始化 Compiler，通过 new Webpack(config)得到 compiler 对象")]),l._v(" "),v("li",[l._v("2、开始编译，执行 Compiler 对象上的 run 方法开始执行编译")]),l._v(" "),v("li",[l._v("3、确定入口文件：根据配置中 entry 字段找到所有入口文件")]),l._v(" "),v("li",[l._v("4、编译模块：从入口文件出发，递归遍历所有依赖的文件，并调用 loader 对模块进行编译，知道所有模块都完成编译")]),l._v(" "),v("li",[l._v("5、完成编译：得到上一步所有文件的编译结果及依赖关系")]),l._v(" "),v("li",[l._v("6、输入资源：根据入口和模块之间的依赖关系，组装成一个的 Chunk，再把每一个 Chunk 转化成单独的文件输出到列表（这一步是可以改变输出内容的最后一步）")]),l._v(" "),v("li",[l._v("7、完成输出：确定好输出内容后，根据配置确定输出路径和文件名，把文件内容写入到文件系统")])]),l._v(" "),v("h2",{attrs:{id:"核心概念"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#核心概念"}},[l._v("#")]),l._v(" 核心概念")]),l._v(" "),v("h3",{attrs:{id:"entry"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#entry"}},[l._v("#")]),l._v(" entry")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("字符串")]),l._v(" "),v("ul",[v("li",[l._v("将所有模块打包到一个 chunk，默认的 chunkName 为 main")])])]),l._v(" "),v("li",[v("p",[l._v("数组")]),l._v(" "),v("ul",[v("li",[l._v("从多个入口开始打包，并合并到一个 chunk 中")])])]),l._v(" "),v("li",[v("p",[l._v("对象")]),l._v(" "),v("ul",[v("li",[l._v("多入口打包，每一个 chunk 的名字由对象中的键指定")])])])]),l._v(" "),v("h3",{attrs:{id:"output"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#output"}},[l._v("#")]),l._v(" output")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("path")])]),l._v(" "),v("li",[v("p",[l._v("publicPath")])]),l._v(" "),v("li",[v("p",[l._v("filename")]),l._v(" "),v("ul",[v("li",[l._v("chunkName")]),l._v(" "),v("li",[l._v("hash")])])])]),l._v(" "),v("h3",{attrs:{id:"module"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#module"}},[l._v("#")]),l._v(" module")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("rules")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("loaders")]),l._v(" "),v("ul",[v("li",[l._v("告诉 webpack 如何去处理指定格式的文件")]),l._v(" "),v("li",[l._v("编写一个 loader")])])]),l._v(" "),v("li",[v("p",[l._v("oneOf")]),l._v(" "),v("ul",[v("li",[l._v("提交匹配效率")])])])])]),l._v(" "),v("li",[v("p",[l._v("noParse")]),l._v(" "),v("ul",[v("li",[l._v("不参与语法解析过程得问题件")])])])]),l._v(" "),v("h3",{attrs:{id:"plugins"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#plugins"}},[l._v("#")]),l._v(" plugins")]),l._v(" "),v("ul",[v("li",[l._v("如何编写一个 plugin")]),l._v(" "),v("li",[l._v("做一些 webpack 之外的工作")])]),l._v(" "),v("h3",{attrs:{id:"devtool"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#devtool"}},[l._v("#")]),l._v(" devtool")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("source-map")]),l._v(" "),v("ul",[v("li",[l._v("[inlint-|hidden-|eval][nosources-][cheap-[module-]]source-map")]),l._v(" "),v("li",[l._v("默认输出单独的 source-map 文件")])])]),l._v(" "),v("li",[v("p",[l._v("开发:cheap-module-eval-source-map")])]),l._v(" "),v("li",[v("p",[l._v("生产：cheap-module-source-map")])])]),l._v(" "),v("h3",{attrs:{id:"mode"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#mode"}},[l._v("#")]),l._v(" mode")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("development")])]),l._v(" "),v("li",[v("p",[l._v("production")]),l._v(" "),v("ul",[v("li",[l._v("会压缩并丑化代码，变得不可读")])])]),l._v(" "),v("li",[v("p",[l._v("主要工作是区分 process.env.NODE_ENV，并自动加载一些内置插件")])])]),l._v(" "),v("h3",{attrs:{id:"externals"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#externals"}},[l._v("#")]),l._v(" externals")]),l._v(" "),v("ul",[v("li",[l._v("外部资源通过 CDN 方式引入")])]),l._v(" "),v("h3",{attrs:{id:"devserver"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#devserver"}},[l._v("#")]),l._v(" devServer")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("自动监听，打包文件")]),l._v(" "),v("ul",[v("li",[l._v("contentBase")]),l._v(" "),v("li",[l._v("port")]),l._v(" "),v("li",[l._v("compress")]),l._v(" "),v("li",[l._v("hot")]),l._v(" "),v("li",[l._v("host")]),l._v(" "),v("li",[l._v("open")]),l._v(" "),v("li",[l._v("historyApifallback")]),l._v(" "),v("li",[l._v("overlay")]),l._v(" "),v("li",[l._v("proxy")])])])]),l._v(" "),v("h3",{attrs:{id:"resolve"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#resolve"}},[l._v("#")]),l._v(" resolve")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("alias")])]),l._v(" "),v("li",[v("p",[l._v("extensions")])]),l._v(" "),v("li",[v("p",[l._v("modules")]),l._v(" "),v("ul",[v("li",[l._v("解析模块的目录，与 require.paths 同一个意思")])])])]),l._v(" "),v("h3",{attrs:{id:"resolveloader"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#resolveloader"}},[l._v("#")]),l._v(" resolveLoader")]),l._v(" "),v("ul",[v("li",[l._v("解析 loader 得规则")]),l._v(" "),v("li",[l._v("modules")])]),l._v(" "),v("h2",{attrs:{id:"功能-优化"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#功能-优化"}},[l._v("#")]),l._v(" 功能/优化")]),l._v(" "),v("h3",{attrs:{id:"code-split"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#code-split"}},[l._v("#")]),l._v(" code split")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("代码分割可以减小主包的大小，将资源分散到几个文件中去加载，实现按需加载或并行加载")])]),l._v(" "),v("li",[v("p",[l._v("babel 插件:babel-plugin-dynamic-import-webpack")])]),l._v(" "),v("li",[v("p",[l._v("分割方式")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("配置 entry，在入口手动分割")]),l._v(" "),v("ul",[v("li",[l._v("如果多个入口引用了相同的模块，那么模块会重复的打包到每一个 chunk")])])]),l._v(" "),v("li",[v("p",[l._v("动态 import")]),l._v(" "),v("ul",[v("li",[l._v("在一个入口（chunk）内中，将部分代码分离出去")])])]),l._v(" "),v("li",[v("p",[l._v("optimization.splitChunks")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("chunks: all")]),l._v(" "),v("ul",[v("li",[l._v("将 node_modules 中的模块单独打包到一个 chunk")]),l._v(" "),v("li",[l._v("多个 chunk 中引用的第三方模块，只输出一次")])])])])]),l._v(" "),v("li",[v("p",[l._v("splitChunksPlugin")]),l._v(" "),v("ul",[v("li",[l._v("可以将公共的依赖模块提取到已有的入口 chunk 中，或者提取到一个新生成的 chunk")])])]),l._v(" "),v("li",[v("p",[l._v("预载入")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("预获取：prefetch")]),l._v(" "),v("ul",[v("li",[l._v("webpackPrefetch: true")]),l._v(" "),v("li",[l._v("将来某些导航下可能需要的资源")]),l._v(" "),v("li",[l._v("通过在页面 head 部分注入一个 link 标签，并表明 type 为 prefetch。"),v("link",{attrs:{rel:"prefetch",href:"login-modal-chunk.js"}})])])]),l._v(" "),v("li",[v("p",[l._v("预加载：preload")]),l._v(" "),v("ul",[v("li",[l._v("当前导航下可能需要资源")]),l._v(" "),v("li",[l._v("webpackPreload: true")]),l._v(" "),v("li",[v("link",{attrs:{rel:"preload"}}),l._v(" 并行加载\n")])])]),l._v(" "),v("li",[v("p",[l._v("不同点")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("preload")]),l._v(" "),v("ul",[v("li",[l._v("在父 chunk 加载时，并行加载")]),l._v(" "),v("li",[l._v("中等优先级，并立即下载")])])]),l._v(" "),v("li",[v("p",[l._v("prefetch")]),l._v(" "),v("ul",[v("li",[l._v("在父 chunk 加载完成以后，才开始加载")]),l._v(" "),v("li",[l._v("浏览器闲置时下载")])])]),l._v(" "),v("li",[v("p",[l._v("浏览器支持程度不同")])])])]),l._v(" "),v("li",[v("p",[l._v("preload-webpack-plugin")])])])])])])]),l._v(" "),v("h3",{attrs:{id:"shimming"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#shimming"}},[l._v("#")]),l._v(" shimming")]),l._v(" "),v("h3",{attrs:{id:"lazy-loading"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#lazy-loading"}},[l._v("#")]),l._v(" lazy loading")]),l._v(" "),v("ul",[v("li",[l._v("当请求到某个资源的时候才去加载")]),l._v(" "),v("li",[l._v("动态 import")])]),l._v(" "),v("h3",{attrs:{id:"pwa-渐进式网络应用程序"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#pwa-渐进式网络应用程序"}},[l._v("#")]),l._v(" pwa：渐进式网络应用程序")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("workbox")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("workbox-webpack-plugin")]),l._v(" "),v("ul",[v("li",[l._v("plugins:[ new Workbox.generateSW() ]")]),l._v(" "),v("li",[l._v("clientclaim")]),l._v(" "),v("li",[l._v("skipWaiting")]),l._v(" "),v("li",[l._v("生成一个 serviceworker 文件")])])])])])]),l._v(" "),v("h3",{attrs:{id:"性能优化"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#性能优化"}},[l._v("#")]),l._v(" 性能优化")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("开发环境优化")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("优化打包速度")]),l._v(" "),v("ul",[v("li",[v("p",[v("a",{attrs:{href:"./HMR"}},[l._v("HMR")])]),l._v(" "),v("ul",[v("li",[v("p",[l._v("当更新某一个文件的时候，webpack 会重新打包所有模块，如果项目文件过多，每一次打包的时间都将很长")])]),l._v(" "),v("li",[v("p",[l._v("只更新我们修改过的部分，而不会编译全部代码")])]),l._v(" "),v("li",[v("p",[l._v("css 的 hmr 需要再开发环境下使用 style-loader")])]),l._v(" "),v("li",[v("p",[l._v("html")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("在 entry 中添加 html")]),l._v(" "),v("ul",[v("li",[l._v("entry:['./scr/index.js', './src/index.html']")]),l._v(" "),v("li",[l._v("也不是真正的 hmr")])])])])]),l._v(" "),v("li",[v("p",[l._v("js")]),l._v(" "),v("ul",[v("li",[l._v("module.hot")])])])])])])]),l._v(" "),v("li",[v("p",[l._v("优化调试功能")]),l._v(" "),v("ul",[v("li",[l._v("devtool")]),l._v(" "),v("li",[l._v("rules oneOf")])])])])]),l._v(" "),v("li",[v("p",[l._v("生产环境优化")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("优化打包速度")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("caching")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("babel 缓存")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("cacheDirectory")]),l._v(" "),v("ul",[v("li",[l._v("将 babel 编译的结果缓存起来，当修改过一个文件编译的时候，其他没有修改过的文件将直接使用缓存的结果")])])])])]),l._v(" "),v("li",[v("p",[l._v("文件资源缓存")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("在一定时间内如果文件没有改变，浏览器将直接使用本地缓存的文件")]),l._v(" "),v("ul",[v("li",[l._v("强制缓存与协商缓存")])])]),l._v(" "),v("li",[v("p",[l._v("hash")]),l._v(" "),v("ul",[v("li",[l._v("每一次打包都生成一个不同的 hash")])])]),l._v(" "),v("li",[v("p",[l._v("contenthash")]),l._v(" "),v("ul",[v("li",[l._v("根据文件内容生成 hash")])])]),l._v(" "),v("li",[v("p",[l._v("chunkhash")]),l._v(" "),v("ul",[v("li",[l._v("不同的 chunk 有不同的 hash")])])])])])])]),l._v(" "),v("li",[v("p",[l._v("dll")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("动态链接库，指示 webpack 哪些库不参与打包")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("创建 dll")]),l._v(" "),v("ul",[v("li",[l._v("webpack.dllplugin")])])]),l._v(" "),v("li",[v("p",[l._v("引入 dll")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("通知 webpack 哪些是 dll，不进行打包")]),l._v(" "),v("ul",[v("li",[l._v("webpack.dllreferenceplugin")])])])])])])]),l._v(" "),v("li",[v("p",[l._v("相当于手动创建 external 的包")])]),l._v(" "),v("li",[v("p",[l._v("与 external 的区别")]),l._v(" "),v("ul",[v("li",[l._v("dll 可以自定义要 external 哪些包")])])])])])])]),l._v(" "),v("li",[v("p",[l._v("优化代码的性能")])]),l._v(" "),v("li",[v("p",[l._v("资源的大小和数量")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("tree shaking")]),l._v(" "),v("ul",[v("li",[l._v("打包阶段，去除掉没有用到的功能，减小包的体积，加快资源的获取")]),l._v(" "),v("li",[l._v("ES6 Module 会默认触发 treeshaking，而 CommonJS 无法触发，原因在于，ES6 Module 是静态引用，编译阶段即可确定依赖关系，而 CommonJS 是动态应用")]),l._v(" "),v("li",[l._v("在 package.json 中添加 sideEffects 属性，表示哪些文件不执行 tree shaking，需要配置 css 文件不执行 tree shaking")]),l._v(" "),v("li",[l._v("webpack 打包生产模式的时候自动开启")])])])])]),l._v(" "),v("li",[v("p",[l._v("optimization")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("splitChunks")])]),l._v(" "),v("li",[v("p",[l._v("runtimChunk")]),l._v(" "),v("ul",[v("li",[l._v("将生成得运行时代码单独打包到一个文件")])])]),l._v(" "),v("li",[v("p",[l._v("minimizer")]),l._v(" "),v("ul",[v("li",[l._v("terser-webpack-plugin")]),l._v(" "),v("li",[l._v("mini-css-extract-plugin")])])])])])])])]),l._v(" "),v("h3",{attrs:{id:"多进程打包"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#多进程打包"}},[l._v("#")]),l._v(" 多进程打包")]),l._v(" "),v("ul",[v("li",[v("p",[l._v("工具")]),l._v(" "),v("ul",[v("li",[l._v("thread-loader")])])]),l._v(" "),v("li",[v("p",[l._v("只有工作耗时较长才有必要")])])]),l._v(" "),v("h2",{attrs:{id:"原理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[l._v("#")]),l._v(" 原理")]),l._v(" "),v("h3",{attrs:{id:"模块打包和执行的核心逻辑"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#模块打包和执行的核心逻辑"}},[l._v("#")]),l._v(" 模块打包和执行的核心逻辑")]),l._v(" "),v("h3",{attrs:{id:"异步模块加载原理"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#异步模块加载原理"}},[l._v("#")]),l._v(" 异步模块加载原理")])])}),[],!1,null,null,null);v.default=e.exports}}]);