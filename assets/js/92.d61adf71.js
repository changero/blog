(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{431:function(a,s,e){"use strict";e.r(s);var t=e(14),n=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("p",[a._v("最新环境搭建"),s("a",{attrs:{href:"https://www.react-native.cn/docs/environment-setup",target:"_blank",rel:"noopener noreferrer"}},[a._v("文档"),s("OutboundLink")],1)]),a._v(" "),s("h2",{attrs:{id:"安装-homebrew"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-homebrew"}},[a._v("#")]),a._v(" 安装 homebrew")]),a._v(" "),s("p",[a._v("搜索按照官方命令直接安装")]),a._v(" "),s("h2",{attrs:{id:"安装-nvm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-nvm"}},[a._v("#")]),a._v(" 安装 nvm")]),a._v(" "),s("p",[s("RouterLink",{attrs:{to:"/code/node/nvm.html"}},[a._v("查看")]),a._v("安装方法")],1),a._v(" "),s("h2",{attrs:{id:"安装-watchman"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-watchman"}},[a._v("#")]),a._v(" 安装 watchman")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("brew "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" watchman\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 或者通过代理的形式安装")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("all_proxy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("socks5://127.0.0.1:1080 brew "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" watchman\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("h2",{attrs:{id:"安装-xocde-并配置-common-line-tools"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-xocde-并配置-common-line-tools"}},[a._v("#")]),a._v(" 安装 xocde 并配置 common Line tools")]),a._v(" "),s("p",[a._v("启动 Xcode，并在"),s("code",[a._v("Xcode | Preferences | Locations")]),a._v("菜单中检查一下是否装有某个版本的"),s("code",[a._v("Command Line Tools")])]),a._v(" "),s("h2",{attrs:{id:"安装-cocoapods"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-cocoapods"}},[a._v("#")]),a._v(" 安装 cocoapods")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://cocoapods.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("CocoaPods"),s("OutboundLink")],1),a._v("是用 Ruby 编写的包管理器。从 0.60 版本开始 react native 的 iOS 版本需要使用 CocoaPods 来管理依赖，可以使用 brew 安装，也可以使用 ruby 的包管理工具安装")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" gem "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" cocoapods\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("或者通过homebrew安装")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("brew "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" cocoapods\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("可以查看pod"),s("a",{attrs:{href:"./pod%E5%AE%89%E8%A3%85"}},[a._v("安装")]),a._v("相关")]),a._v(" "),s("p",[s("em",[a._v("可选配置 cocoapods 的中科大源")]),a._v("，"),s("a",{attrs:{href:"https://mirrors.tuna.tsinghua.edu.cn/help/CocoaPods/",target:"_blank",rel:"noopener noreferrer"}},[a._v("参考"),s("OutboundLink")],1)]),a._v(" "),s("h2",{attrs:{id:"初始化项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化项目"}},[a._v("#")]),a._v(" 初始化项目")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("npx react-native@latest init myrn --npm\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"出现ruby版本过低的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#出现ruby版本过低的问题"}},[a._v("#")]),a._v(" 出现ruby版本过低的问题")]),a._v(" "),s("p",[a._v("mac电脑上自带的ruby版本可能过低，需要手动重新安装。可以通过brew安装")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("brew search ruby\n\nbrew "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" ruby@3.0\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[a._v("然后配置zsh配置文件")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/opt/homebrew/opt/ruby@3.1/bin:"),s("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("最后执行"),s("code",[a._v("source ~/.zshrc")]),a._v("就可以了")]),a._v(" "),s("h2",{attrs:{id:"启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[a._v("#")]),a._v(" 启动")]),a._v(" "),s("p",[a._v("如果在初始化过程中，pod相关的依赖都已经正确安装，否则建议在 ios 目录下通过 pod 先安装依赖")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" myrn/ios "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" pod "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("安装报错，可以"),s("a",{attrs:{href:"https://www.jianshu.com/p/7b21254cbd77",target:"_blank",rel:"noopener noreferrer"}},[a._v("参考"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("可以提前设置好代理")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("all_proxy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("socks5://127.0.0.1:1080\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("最后可以通过打开 ios 目录下的"),s("code",[a._v(".xcworkspace")]),a._v("文件直接导入到 XCODE 中运行，并等待xcode索引完成")]),a._v(" "),s("p",[a._v("也可以执行：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("react-native run-ios\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("来启动项目。此时会打开 ios 模拟器和一个终端")]),a._v(" "),s("h2",{attrs:{id:"可能出现的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可能出现的问题"}},[a._v("#")]),a._v(" 可能出现的问题")]),a._v(" "),s("p",[a._v("在启动终端打开模拟器的时候，出现找不到 node 执行文件的情况。")]),a._v(" "),s("p",[a._v("原因是启动的终端的环境变量中并没有 node，主要跟终端的配置有关。通过 nvm 安装 node，以软连接的形式将 node 链接到全局环境下")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ln")]),a._v(" -s "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("which")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("node")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v(" /usr/local/bin/node\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("或者在 xcode 中配置，"),s("a",{attrs:{href:"https://www.jianshu.com/p/4501ed597aba",target:"_blank",rel:"noopener noreferrer"}},[a._v("参考"),s("OutboundLink")],1)]),a._v(" "),s("h3",{attrs:{id:"启动项目"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动项目"}},[a._v("#")]),a._v(" 启动项目")]),a._v(" "),s("p",[a._v("先执行"),s("code",[a._v("npm run android")]),a._v("构建 Android 项目，并启动一个 Server。")]),a._v(" "),s("p",[a._v("将 android 项目导入到 android studio，点击模拟器启动，第一次需要创建一个模拟器。按步骤执行安装模拟器虚拟设备就可以了")]),a._v(" "),s("p",[a._v("最后启动成功")]),a._v(" "),s("h4",{attrs:{id:"关于-maven-镜像的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关于-maven-镜像的问题"}},[a._v("#")]),a._v(" 关于 maven 镜像的问题")]),a._v(" "),s("p",[a._v("可以尝试阿里云提供的"),s("a",{attrs:{href:"https://help.aliyun.com/document_detail/102512.html?spm=a2c40.aliyun_maven_repo.0.0.361865e90r2x4b",target:"_blank",rel:"noopener noreferrer"}},[a._v("maven 镜像"),s("OutboundLink")],1),a._v("，将"),s("code",[a._v("android/build.gradle")]),a._v("中的"),s("code",[a._v("jcenter()")]),a._v("和"),s("code",[a._v("google()")]),a._v("分别替换为"),s("code",[a._v("maven { url 'https://maven.aliyun.com/repository/jcenter' }")]),a._v("和"),s("code",[a._v("maven { url 'https://maven.aliyun.com/repository/google' }")]),a._v("（注意有多处需要替换")]),a._v(" "),s("h2",{attrs:{id:"qa"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#qa"}},[a._v("#")]),a._v(" QA")]),a._v(" "),s("ol",[s("li",[a._v("启动之后显示"),s("code",[a._v("no bundle url present")])])]),a._v(" "),s("p",[a._v("a. 在 package.json 中添加一条，然后执行"),s("code",[a._v("npm run build:ios")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[a._v("```json\n  {\n    \"scripts\":{\n      \"build:ios\": \"react-native --entry-file='index.js' --bundle-output='./ios/main.jsbundle' --dev=false --platform='ios'\"\n    }\n  }\n```\n")])])]),s("p",[a._v("b. 打开 xcode，选择"),s("code",[a._v("Select -> Target → Build Phases")]),a._v(",在"),s("code",[a._v("Copy Bundle Resources")]),a._v("下添加好刚才构建出来的 main.jsbundle")]),a._v(" "),s("p",[a._v("c. 重新启动")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://onexlab-io.medium.com/no-bundle-url-present-fixed-ca2688a80f66",target:"_blank",rel:"noopener noreferrer"}},[a._v("参考连接"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);