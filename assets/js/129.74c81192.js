(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{471:function(t,v,i){"use strict";i.r(v);var _=i(14),n=Object(_.a)({},(function(){var t=this,v=t._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h2",{attrs:{id:"背景"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[t._v("#")]),t._v(" 背景")]),t._v(" "),v("p",[t._v("项目中经常使用别人维护的模块，在 git 中使用子模块的功能能够大大提高开发效率。")]),t._v(" "),v("p",[t._v("使用子模块后，不必负责子模块的维护，只需要在必要的时候同步更新子模块即可。")]),t._v(" "),v("p",[t._v("本文主要讲解子模块相关的基础命令，详细使用请参考 man page。")]),t._v(" "),v("p",[t._v("子模块的添加\n添加子模块非常简单，命令如下：")]),t._v(" "),v("p",[t._v("git submodule add [url][path]")]),t._v(" "),v("p",[t._v("其中，url 为子模块的路径，path 为该子模块存储的目录路径。")]),t._v(" "),v("p",[t._v("执行成功后，git status 会看到项目中修改了.gitmodules，并增加了一个新文件（为刚刚添加的路径）")]),t._v(" "),v("p",[t._v("git diff --cached 查看修改内容可以看到增加了子模块，并且新文件下为子模块的提交 hash 摘要")]),t._v(" "),v("p",[t._v("git commit 提交即完成子模块的添加")]),t._v(" "),v("p",[t._v("子模块的使用\n克隆项目后，默认子模块目录下无任何内容。需要在项目根目录执行如下命令完成子模块的下载：")]),t._v(" "),v("p",[t._v("git submodule init\ngit submodule update\n1\n2\n或：")]),t._v(" "),v("p",[t._v("git submodule update --init --recursive\n1\n执行后，子模块目录下就有了源码，再执行相应的 makefile 即可。")]),t._v(" "),v("p",[t._v("子模块的更新\n子模块的维护者提交了更新后，使用子模块的项目必须手动更新才能包含最新的提交。")]),t._v(" "),v("p",[t._v("在项目中，进入到子模块目录下，执行 git pull 更新，查看 git log 查看相应提交。")]),t._v(" "),v("p",[t._v("完成后返回到项目目录，可以看到子模块有待提交的更新，使用 git add，提交即可。")]),t._v(" "),v("p",[t._v("删除子模块\n有时子模块的项目维护地址发生了变化，或者需要替换子模块，就需要删除原有的子模块。")]),t._v(" "),v("p",[t._v("删除子模块较复杂，步骤如下：")]),t._v(" "),v("p",[t._v("rm -rf 子模块目录 删除子模块目录及源码\nvi .gitmodules 删除项目目录下.gitmodules 文件中子模块相关条目\nvi .git/config 删除配置项中子模块相关条目\nrm .git/module/* 删除模块下的子模块目录，每个子模块对应一个目录，注意只删除对应的子模块目录即可\n执行完成后，再执行添加子模块命令即可，如果仍然报错，执行如下：")]),t._v(" "),v("p",[t._v("git rm --cached 子模块名称")]),t._v(" "),v("p",[t._v("完成删除后，提交到仓库即可。\n————————————————\n版权声明：本文为 CSDN 博主「guotianqing」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。\n原文链接：https://blog.csdn.net/guotianqing/article/details/82391665")])])}),[],!1,null,null,null);v.default=n.exports}}]);