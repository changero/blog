(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{475:function(s,a,t){"use strict";t.r(a);var e=t(14),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"背景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[s._v("#")]),s._v(" 背景")]),s._v(" "),a("p",[s._v("在开发大型项目的时候，会根据不同的迭代和开发人员，出现很多的分支，这些分支可能纵横交错，在可视化工具里面开上去就像一张巨大的网一样，也不具备了可识别性。而同时，随着时间的推移，有很多分支又是不再维护的，当然也不会又人敢真正的去删，所以，我需要一个方法能简洁的显示我所需要的分支")]),s._v(" "),a("h2",{attrs:{id:"实现方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实现方法"}},[s._v("#")]),s._v(" 实现方法")]),s._v(" "),a("h3",{attrs:{id:"_1、关联仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、关联仓库"}},[s._v("#")]),s._v(" 1、关联仓库")]),s._v(" "),a("p",[s._v("第一步是关联仓库，这一步可以通过传统的"),a("code",[s._v("git clone")]),s._v("来关联，也可以手动创建文件夹之后添加远程仓库")]),s._v(" "),a("p",[s._v("第一种")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone --depth"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" -b master "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("git repo url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("在 clone 的时候添加"),a("code",[s._v("--depth")]),s._v("和"),a("code",[s._v("-b")]),s._v("参数能够只 clone 指定的分支，例如 master")]),s._v(" "),a("p",[s._v("第二种")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" gitdemo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" gitdemo\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -t "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("branch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" -f --no-tags origin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("git repo url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关联本地与远程分支")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch --set-upstream-to"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("origin/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("branch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("branch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("blockquote",[a("p",[a("code",[s._v("-f")]),s._v("参数表示 fetch，"),a("code",[s._v("--no-tags")]),s._v("表示不获取 tag")])]),s._v(" "),a("h3",{attrs:{id:"_2、添加关联远程分支"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、添加关联远程分支"}},[s._v("#")]),s._v(" 2、添加关联远程分支")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote set-branches --add origin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("需要关联的远程分支"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("一般在一个新的迭代阶段，从主分支迁出一个开发分支之后，开发者自行关联。")]),s._v(" "),a("h3",{attrs:{id:"_3、删除远程分支关联"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、删除远程分支关联"}},[s._v("#")]),s._v(" 3、删除远程分支关联")]),s._v(" "),a("p",[s._v("开发结束之后如果需要删除这个分支")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch -d "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("branch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("删除 origin/[branch]，注意不是删除远程分支，而是删除本地的远程关联")]),s._v(" "),a("p",[s._v("找到"),a("code",[s._v(".git>refs>remotes")]),s._v("文件夹，删除分支名对应的文件即可")]),s._v(" "),a("p",[s._v("以上步骤完成以后，在下次更新远程分支（fetch/pull）的时候还是会把刚才的分支下载下来")]),s._v(" "),a("p",[s._v("所以还需要一步，打开"),a("code",[s._v(".git/config")]),s._v("文件，找到你要删除的分支名直接删除")]),s._v(" "),a("h3",{attrs:{id:"例子-🌰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#例子-🌰"}},[s._v("#")]),s._v(" 例子 🌰")]),s._v(" "),a("p",[s._v("先假设一个分支"),a("code",[s._v("feature/env")])]),s._v(" "),a("ul",[a("li",[s._v("首先删除本地这个分支")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch -d feature/env\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("对应的文件操作是，删除"),a("code",[s._v(".git/refs/heads/feature/env")])]),s._v(" "),a("ul",[a("li",[s._v("再删除再本地的远程分支")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch -d -r origin/feature/env\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("对应的文件操作是，删除"),a("code",[s._v(".git/refs/remotes/origin/feature/env")])]),s._v(" "),a("p",[s._v("现在可以通过"),a("code",[s._v("git remote show origin")]),s._v("，查看远程分支的状态")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote show origin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这个命令与"),a("code",[s._v("git branch -a")]),s._v("的区别在于，前者会联网检查远程分支，而后者之后检查本地分支所关联的远程分支")]),s._v(" "),a("p",[s._v("这个时候通过"),a("code",[s._v("remote show")]),s._v("就可以发现"),a("code",[s._v("feature/env")]),s._v("远程分支后面有句话"),a("code",[s._v("new (next fetch will store in remotes/origin)")])]),s._v(" "),a("p",[s._v("表示再下次执行"),a("code",[s._v("fetch")]),s._v("操作的时候会重新将该远程分支关联上")]),s._v(" "),a("p",[s._v("有两种方法可以删掉这个分支")]),s._v(" "),a("blockquote",[a("p",[s._v("不是真正的删掉远程上的这个分支")])]),s._v(" "),a("h4",{attrs:{id:"删除关联"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除关联"}},[s._v("#")]),s._v(" 删除关联")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("命令行方式")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote set-branches origin master // 只保留master\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote set-branches --add origin otherBranch // 添加其他分支\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("修改文件的方式")])])]),s._v(" "),a("p",[s._v("找到"),a("code",[s._v(".git/config")]),s._v("文件，文件最开始可能是这样的")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[core]\n\trepositoryformatversion = 0\n\tfilemode = false\n\tbare = false\n\tlogallrefupdates = true\n\tsymlinks = false\n\tignorecase = true\n[submodule]\n\tactive = .\n[remote "origin"]\n\turl = 【远程分支地址】\n\tfetch = +refs/heads/*:refs/remotes/origin/*\n[branch "master"]\n\tremote = origin\n\tmerge = refs/heads/master\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("需要修改的是 remote 那一项")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[remote "origin"]\n\turl = 【远程分支地址】\n\tfetch = +refs/heads/master:refs/remotes/origin/master\n\tfetch = +refs/heads/otherBranch:refs/remotes/origin/otherBranch\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("这样就实现了只关联需要的分支")])])}),[],!1,null,null,null);a.default=n.exports}}]);