(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{481:function(s,a,t){"use strict";t.r(a);var e=t(14),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("已 centos 为例")]),s._v(" "),a("h2",{attrs:{id:"网络配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网络配置"}},[s._v("#")]),s._v(" 网络配置")]),s._v(" "),a("ul",[a("li",[s._v("查看本机所有网络接口："),a("code",[s._v("ifconfig")])]),s._v(" "),a("li",[s._v("查看 eth0 接口的网络情况："),a("code",[s._v("ifconfig eth0")])]),s._v(" "),a("li",[s._v("修改接口的 ip 地址:"),a("code",[s._v("ifconfig eth0 10.10.10.1")])]),s._v(" "),a("li",[s._v("修改接口的 ip 地址及子网掩码:"),a("code",[s._v("ifconfig eth0 10.10.10.10 netmask 10.10.10.1")])]),s._v(" "),a("li",[s._v("查看网关情况:"),a("code",[s._v("route -n")])]),s._v(" "),a("li",[s._v("删除默认网关:"),a("code",[s._v("route del default gw [网关地址]")])]),s._v(" "),a("li",[s._v("添加默认网关:"),a("code",[s._v("route add default gw [网关地址]")])]),s._v(" "),a("li",[s._v("针对主机走不同的网关："),a("code",[s._v("route add -host [host地址] gw [网关地址]")])]),s._v(" "),a("li",[s._v("针对某一个网段添加一个网关："),a("code",[s._v("route add -net 192.168.0.0 netmask 255.255.255.0 gw [网关地址]")])])]),s._v(" "),a("h3",{attrs:{id:"故障排除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#故障排除"}},[s._v("#")]),s._v(" 故障排除")]),s._v(" "),a("h4",{attrs:{id:"ping"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ping"}},[s._v("#")]),s._v(" ping")]),s._v(" "),a("p",[s._v("检测当前主机到目标主机的连接情况，"),a("code",[s._v("ping 目标主机域名或ip")])]),s._v(" "),a("h4",{attrs:{id:"traceroute"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#traceroute"}},[s._v("#")]),s._v(" traceroute")]),s._v(" "),a("p",[s._v("跟踪路由状态，"),a("code",[s._v("traceroute -w 1 ip或主机")]),s._v("，每一个节点做多等待 1s")]),s._v(" "),a("h4",{attrs:{id:"mtr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mtr"}},[s._v("#")]),s._v(" mtr")]),s._v(" "),a("p",[s._v("my trace route")]),s._v(" "),a("h4",{attrs:{id:"nslookup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nslookup"}},[s._v("#")]),s._v(" nslookup")]),s._v(" "),a("p",[s._v("域名解析为 ip 地址，类似 dig\n"),a("code",[s._v("nslookup ip或域名")])]),s._v(" "),a("h4",{attrs:{id:"telnet"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#telnet"}},[s._v("#")]),s._v(" telnet")]),s._v(" "),a("p",[s._v("端口检查\n"),a("code",[s._v("telnet ip或域名 port")])]),s._v(" "),a("h4",{attrs:{id:"tcpdump"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tcpdump"}},[s._v("#")]),s._v(" tcpdump")]),s._v(" "),a("p",[a("code",[s._v("tcpdump -i any")]),s._v("抓取所有网卡的网络包\n"),a("code",[s._v("-n")]),s._v("表示把域名解析成 ip\n"),a("code",[s._v("port 80")]),s._v("抓 80 端口\n"),a("code",[s._v("host 10.10.10.5")]),s._v("抓指定主机的包\n"),a("code",[s._v("-w filename")]),s._v("保存到文件\n"),a("code",[s._v("tcpdump -i any -n host 10.10.10.5 and port 80")])]),s._v(" "),a("h4",{attrs:{id:"netstat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#netstat"}},[s._v("#")]),s._v(" netstat")]),s._v(" "),a("p",[a("code",[s._v("netstat -ntpl")]),s._v(" "),a("code",[s._v("-n")]),s._v("解析域名\n"),a("code",[s._v("-t")]),s._v("显示 tcp\n"),a("code",[s._v("-p")]),s._v("显示进程 PID\n"),a("code",[s._v("-l")]),s._v("tcp listen")]),s._v(" "),a("h4",{attrs:{id:"ss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ss"}},[s._v("#")]),s._v(" ss")]),s._v(" "),a("p",[s._v("与 netstat 参数基本相同")]),s._v(" "),a("h2",{attrs:{id:"网络服务管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网络服务管理"}},[s._v("#")]),s._v(" 网络服务管理")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("网路服务管理程序分为两种，分别是"),a("code",[s._v("SysV")]),s._v("和"),a("code",[s._v("systemd")])]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("service network start|stop|restart")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("chkconfig --list network")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("systemctl list-unit-files NetworkManager.service")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("systemctl start|stop|restart NetworkManger")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("systemctl enable|disable NetworkManager")])])])])])]),s._v(" "),a("p",[s._v("配置文件位置："),a("code",[s._v("/etc/sysconfig/network-scripts/")]),s._v("\n主机名："),a("code",[s._v("hostname")]),s._v("、修改 hostname："),a("code",[s._v("hostnamectl set-hostname myhostname")])]),s._v(" "),a("h2",{attrs:{id:"软件管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#软件管理"}},[s._v("#")]),s._v(" 软件管理")]),s._v(" "),a("p",[s._v("centos、redhat 使用 yum 包管理器，软件包格式为 rpm\ndebian、ubuntu 使用 apt 包管理器，软件包格式为 deb\n"),a("code",[s._v("rpm -qa")]),s._v("，查询所有安装的软件\n"),a("code",[s._v("rpm -q 软件名")]),s._v("搜索安装过的软件\n"),a("code",[s._v("rpm -i rpm包名")]),s._v("安装软件\n"),a("code",[s._v("rpm -e 软件名")]),s._v("卸载")]),s._v(" "),a("h3",{attrs:{id:"yum"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yum"}},[s._v("#")]),s._v(" yum")]),s._v(" "),a("p",[s._v("centos yum 源："),a("code",[s._v("http://mirror.centos.org/centos/7/")]),s._v("\n国内镜像："),a("code",[s._v("https://opsx.alibaba.com/mirror")]),s._v("\nyum 配置文件："),a("code",[s._v("/etc/yum.repos.d/CentOS-Base.repo")]),s._v("。也可以获取自动配置脚本："),a("code",[s._v("wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo")])]),s._v(" "),a("p",[s._v("安装："),a("code",[s._v("yum install")]),s._v("\n卸载："),a("code",[s._v("yum remove")]),s._v("\n更新："),a("code",[s._v("yum update")])]),s._v(" "),a("h2",{attrs:{id:"内核升级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内核升级"}},[s._v("#")]),s._v(" 内核升级")]),s._v(" "),a("p",[s._v("rpm 格式内核\n查看内核版本："),a("code",[s._v("uname -r")]),s._v("\n升级内核版本："),a("code",[s._v("yum install kernel-3.10.0")]),s._v("\n升级其他补丁："),a("code",[s._v("yum update")])]),s._v(" "),a("h2",{attrs:{id:"进程管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进程管理"}},[s._v("#")]),s._v(" 进程管理")]),s._v(" "),a("h3",{attrs:{id:"进程查看"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进程查看"}},[s._v("#")]),s._v(" 进程查看")]),s._v(" "),a("ul",[a("li",[s._v("ps（process status）：\n"),a("ul",[a("li",[s._v("查看更详细的信息"),a("code",[s._v("ps -e | more")]),s._v("、"),a("code",[s._v("ps -aux")])]),s._v(" "),a("li",[s._v("显示父进程 ID："),a("code",[s._v("ps -ef")])]),s._v(" "),a("li",[s._v("显示线程："),a("code",[s._v("ps -eLf")])])])]),s._v(" "),a("li",[s._v("pstree")]),s._v(" "),a("li",[s._v("top：查看进程状态及系统信息\n"),a("ul",[a("li",[s._v("按下数字 1 可以显示每个 CPU 内核的状态")]),s._v(" "),a("li",[a("code",[s._v("top -p PID")]),s._v("查特定的进程状态")])])])]),s._v(" "),a("h3",{attrs:{id:"进程控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进程控制"}},[s._v("#")]),s._v(" 进程控制")]),s._v(" "),a("ul",[a("li",[s._v("优先级调整：nice 从-20 到 19，值越小，优先级越高，抢占资源就越多\n"),a("ul",[a("li",[a("code",[s._v("nice -n 10 ./a.sh")])])])]),s._v(" "),a("li",[s._v("renice：重新设置优先级\n"),a("ul",[a("li",[a("code",[s._v("renice -n 15 PID")])])])]),s._v(" "),a("li",[s._v("后台运行\n"),a("ul",[a("li",[a("code",[s._v("./a.sh &")])]),s._v(" "),a("li",[s._v("对正在执行中的命令，执行"),a("code",[s._v("ctrl + z")])]),s._v(" "),a("li",[s._v("调回前台："),a("code",[s._v("jobs")]),s._v("显示进程序号，再执行"),a("code",[s._v("fg 序号")])])])])]),s._v(" "),a("h3",{attrs:{id:"进程间通信"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进程间通信"}},[s._v("#")]),s._v(" 进程间通信")]),s._v(" "),a("p",[a("code",[s._v("kill -l")]),s._v("可以查看所有支持的信号。"),a("code",[s._v("ctrl + c")]),s._v("相当于 2 号信号\n9 号信号无条件结束进程："),a("code",[s._v("kill -9 PID")])]),s._v(" "),a("h3",{attrs:{id:"守护进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#守护进程"}},[s._v("#")]),s._v(" 守护进程")]),s._v(" "),a("p",[a("code",[s._v("nohup")]),s._v("命令使得进程忽略"),a("code",[s._v("hangup(挂起)")]),s._v("信号："),a("code",[s._v("nohup [command] &")]),s._v("\nscreen 命令来管理后台进程")]),s._v(" "),a("ul",[a("li",[s._v("创建环境："),a("code",[s._v("screen")])]),s._v(" "),a("li",[s._v("退出："),a("code",[s._v("ctrl + a d")])]),s._v(" "),a("li",[s._v("查看当前所有的环境： "),a("code",[s._v("screen -ls")])]),s._v(" "),a("li",[s._v("恢复会话："),a("code",[s._v("screen -r sessionid")])])]),s._v(" "),a("h2",{attrs:{id:"服务管理工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务管理工具"}},[s._v("#")]),s._v(" 服务管理工具")]),s._v(" "),a("ul",[a("li",[s._v("service\n"),a("ul",[a("li",[s._v("脚本存放位置："),a("code",[s._v("/etc/init.d")])])])]),s._v(" "),a("li",[s._v("systemctl\n"),a("ul",[a("li",[s._v("脚本存放位置："),a("code",[s._v("/usr/lib/systemd/system")])]),s._v(" "),a("li",[s._v("常用操作："),a("code",[s._v("start|stop|restart|reload|enable|disable")])]),s._v(" "),a("li",[s._v("在脚本存放位置目录中，有很多的"),a("code",[s._v("target")]),s._v("结尾的文件，其中有"),a("code",[s._v("runlevel")]),s._v("开头的，表示的是系统的运行等级。通过"),a("code",[s._v("systemctl get-default")]),s._v("可以查看当前系统的运行等级，通过"),a("code",[s._v("systemctl set-default")]),s._v("可以修改系统的运行等级，重启之后生效")])])])]),s._v(" "),a("h2",{attrs:{id:"selinux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#selinux"}},[s._v("#")]),s._v(" SELinux")]),s._v(" "),a("p",[a("code",[s._v("getenforce")]),s._v("查看 selinux 的状态，状态类型在"),a("code",[s._v("/etc/selinux/config")]),s._v("文件中可以看到。\n"),a("code",[s._v("setenforce")]),s._v(" 临时修改 selinux 的状态")]),s._v(" "),a("h2",{attrs:{id:"内存与磁盘管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内存与磁盘管理"}},[s._v("#")]),s._v(" 内存与磁盘管理")]),s._v(" "),a("p",[s._v("查看磁盘和内存的命令：")]),s._v(" "),a("ul",[a("li",[s._v("free："),a("code",[s._v("free -m")]),s._v("以 MB 为单位显示。"),a("code",[s._v("free -g")]),s._v("以 GB 为单位显示")]),s._v(" "),a("li",[s._v("top")])]),s._v(" "),a("p",[s._v("磁盘使用率查看：")]),s._v(" "),a("ul",[a("li",[s._v("fdisk："),a("code",[s._v("fdisk -l")])]),s._v(" "),a("li",[s._v("df："),a("code",[s._v("df -h")])]),s._v(" "),a("li",[s._v("du："),a("code",[s._v("du -sh .")]),s._v("，相比"),a("code",[s._v("ls")]),s._v("命令查看的文件大小，du 显示的是文件实际在磁盘里的大小。比如使用 dd 命令输出一个文件，"),a("code",[s._v("dd if=/dev/zero bs=4M count=10 seek=20 of=afile")]),s._v("。总共输出了 40M 大小，通过 du 看到的文件大小就是 40M。而文件前面跳过了 20 个块，也就是 80M 的大小，所以通过 ls 命令就看到了 120M 大小的文件")])]),s._v(" "),a("h2",{attrs:{id:"常见的文件系统"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见的文件系统"}},[s._v("#")]),s._v(" 常见的文件系统")]),s._v(" "),a("p",[s._v("linux 支持如下的文件系统：")]),s._v(" "),a("ul",[a("li",[s._v("ext4（centos6）")]),s._v(" "),a("li",[s._v("xfs（centos7）")]),s._v(" "),a("li",[s._v("NTFS(需要额外安装软件)")])]),s._v(" "),a("p",[s._v("通过"),a("code",[s._v("ls -i")]),s._v("可以查看文件的"),a("code",[s._v("inode")]),s._v("。\n硬链接："),a("code",[s._v("ln afile bfile")]),s._v("二者具有相同的"),a("code",[s._v("inode")]),s._v("，共享一个 datablock\n软链接："),a("code",[s._v("ln -s afile bfile")]),s._v("二者不具有相同的 inode")]),s._v(" "),a("h3",{attrs:{id:"文件访问控制列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件访问控制列表"}},[s._v("#")]),s._v(" 文件访问控制列表")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("getfacl")]),s._v("获取文件访问控制列表")]),s._v(" "),a("li",[a("code",[s._v("setfacl")]),s._v("设置文件访问控制权限")])]),s._v(" "),a("p",[a("code",[s._v("setfacl -m u:username:r afile")]),s._v("："),a("code",[s._v("-m")]),s._v("表示赋予权限，"),a("code",[s._v("-x")]),s._v("表示回收权限。后面接上要赋予的用户("),a("code",[s._v("u:username")]),s._v(")或组("),a("code",[s._v("g:groupname")]),s._v(")，最后是文件名")]),s._v(" "),a("h2",{attrs:{id:"分区和挂载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分区和挂载"}},[s._v("#")]),s._v(" 分区和挂载")]),s._v(" "),a("p",[s._v("常用相关命令")]),s._v(" "),a("ul",[a("li",[s._v("fdisk\n"),a("ul",[a("li",[a("code",[s._v("fdisk /dev/sdc")]),s._v(" 对设备进行分区，并进入命令模式")]),s._v(" "),a("li",[s._v("n 表示创建分区")]),s._v(" "),a("li",[s._v("d 表示删除分区")]),s._v(" "),a("li",[s._v("w 表示写入分区配置")]),s._v(" "),a("li",[s._v("p 查看当前分区信息")])])]),s._v(" "),a("li",[s._v("mkfs\n"),a("ul",[a("li",[a("code",[s._v("mkfs.ext4 /dev/sdc1")]),s._v("分区格式化")])])]),s._v(" "),a("li",[s._v("parted\n"),a("ul",[a("li",[s._v("对大于 2G 的设备进行分区")])])]),s._v(" "),a("li",[s._v("mount\n"),a("ul",[a("li",[s._v("分区格式化完成以后，需要通过 mount 命令将分区挂载到目录中："),a("code",[s._v("mount /dev/sdc1 /mnt/sdc1")])])])])]),s._v(" "),a("p",[s._v("配置文件："),a("code",[s._v("/etc/fstab")]),s._v("\n设置自动挂载，修改配置文件：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("/dev/sdc1 /mnt/sdc1 ext4 defaults "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"交换分区"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#交换分区"}},[s._v("#")]),s._v(" 交换分区")]),s._v(" "),a("p",[s._v("设置分区为交换分区："),a("code",[s._v("mkswap /dev/sdd1")]),s._v("\n添加交换分区："),a("code",[s._v("swapon /dev/sdd1")]),s._v("\n关闭交换分区："),a("code",[s._v("swapoff /dev/sdd1")]),s._v("\n或者通过 dd 命令分割一块空间出来：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/zero "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bs")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("4M "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("count")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("of")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/swapfile\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkswap")]),s._v(" /swapfile\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("swapon")]),s._v(" /swapfile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("修改配置文件："),a("code",[s._v("/etc/fstab")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("/swapfile swap swap defaults "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"系统综合状态查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统综合状态查询"}},[s._v("#")]),s._v(" 系统综合状态查询")]),s._v(" "),a("ol",[a("li",[s._v("docker 安装"),a("code",[s._v("netdata")])]),s._v(" "),a("li",[s._v("sar 命令")]),s._v(" "),a("li",[s._v("第三方命令\n"),a("ol",[a("li",[s._v("yum install epel-release")]),s._v(" "),a("li",[s._v("yum install iftop")])])])]),s._v(" "),a("h2",{attrs:{id:"shell-脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell-脚本"}},[s._v("#")]),s._v(" shell 脚本")]),s._v(" "),a("p",[s._v("Linux 的启动过程："),a("code",[s._v("BIOS - MBR - BootLoader(grub) - kernel - systemd - 系统初始化 - shell")]),s._v("\n如何查看系统的主引导记录")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("if")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/dev/sda "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("of")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mbr.bin "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bs")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("446")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("count")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#bs=512则包含磁盘分区表信息")]),s._v("\nhexdump -C mbr.bin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("mbr 正确之后，将控制权交给 bootloader，在 centos7 中也就是 grub\ngrub 的位置："),a("code",[s._v("/boot/grub2")]),s._v("。通过"),a("code",[s._v("grub2-editenv list")]),s._v("来查看内核的列表")]),s._v(" "),a("h3",{attrs:{id:"执行脚本的方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行脚本的方式"}},[s._v("#")]),s._v(" 执行脚本的方式")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("bash ./filename.sh")]),s._v("开启子进程")]),s._v(" "),a("li",[a("code",[s._v("./filename.sh")]),s._v("开启子进程")]),s._v(" "),a("li",[a("code",[s._v("source ./filename.sh")]),s._v("当前进程")]),s._v(" "),a("li",[a("code",[s._v(". ./filename.sh")]),s._v("当前进程")])]),s._v(" "),a("h3",{attrs:{id:"重定向"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重定向"}},[s._v("#")]),s._v(" 重定向")]),s._v(" "),a("ul",[a("li",[s._v("输出重定向："),a("code",[s._v("ls > a.txt")]),s._v("将 ls 的结果写入到"),a("code",[s._v("a.txt")]),s._v("文件中")]),s._v(" "),a("li",[s._v("输入重定向："),a("code",[s._v("read var < b.txt")]),s._v("以"),a("code",[s._v("b.txt")]),s._v("文件的内容作为变量 var 的值")]),s._v(" "),a("li",[s._v("错误重定向："),a("code",[s._v("nocmd 2> error.txt")]),s._v("不存在的命令执行会报错，将错误内容写入到"),a("code",[s._v("error.txt")]),s._v("文件中")]),s._v(" "),a("li",[s._v("全部重定向："),a("code",[s._v("command $> out.txt")]),s._v("将 command 命令的输出写入到 out.txt 文件中")])]),s._v(" "),a("h3",{attrs:{id:"环境变量配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境变量配置文件"}},[s._v("#")]),s._v(" 环境变量配置文件")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("/etc/profile")])]),s._v(" "),a("li",[a("code",[s._v("~/.bash_profile")])]),s._v(" "),a("li",[a("code",[s._v("~/.bashrc")])]),s._v(" "),a("li",[a("code",[s._v("/etc/bashrc")])]),s._v(" "),a("li",[a("code",[s._v("/etc/profile.d")])])]),s._v(" "),a("p",[s._v("前四个加载顺序从上到下\n切换用户的时候要添加"),a("code",[s._v("-")]),s._v("，e.g"),a("code",[s._v("su - root")]),s._v("，这样才能加载 4 个配置文件，否则新修改的配置可能不会生效")]),s._v(" "),a("h3",{attrs:{id:"数组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数组"}},[s._v("#")]),s._v(" 数组")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义数组")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ipts")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".10.1 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".10.2 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.10")]),s._v(".10.3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示所有数组元素")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ipts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示数组个数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("#")]),s._v("ipts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示第一个元素")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ipts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"运算"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运算"}},[s._v("#")]),s._v(" 运算")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("let")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a=1"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 等同于")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v(" a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$((")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("))")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" + "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("num1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" +5"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("区别")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("a")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("+5\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$a")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4+5")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v(" b"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$b")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 9")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("c")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("expr")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" + "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$c")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 9")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"其他特殊符号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他特殊符号"}},[s._v("#")]),s._v(" 其他特殊符号")]),s._v(" "),a("h4",{attrs:{id:""}},[a("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")]),s._v(" "),a("code",[s._v("()")])]),s._v(" "),a("ol",[a("li",[s._v("可以表示开启一个子 shell")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("a")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$a")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 结果为空")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("也可以表示取命令的结果")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmd")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("还可以表示数组，"),a("code",[s._v("ipts=(1 2 3)")])])]),s._v(" "),a("h4",{attrs:{id:"-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-2"}},[s._v("#")]),s._v(" "),a("code",[s._v("(())")])]),s._v(" "),a("p",[s._v("用来做算数运算，"),a("code",[s._v("echo $(( 10 +20))")]),s._v("，等同于 let 命令")]),s._v(" "),a("h4",{attrs:{id:"-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-3"}},[s._v("#")]),s._v(" "),a("code",[s._v("[]")])]),s._v(" "),a("p",[s._v("等同于 test 命令，"),a("code",[s._v("[ 5 -gt 4]")]),s._v(" "),a("code",[s._v("[[]]")]),s._v("可以测试表达式，"),a("code",[s._v("[[ 5 > 4 ]]")])]),s._v(" "),a("h4",{attrs:{id:"-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#-4"}},[s._v("#")]),s._v(" "),a("code",[s._v("{}")])]),s._v(" "),a("p",[s._v("表示一个范围")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 0 1 2 3 4 5 6 7 8 9")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("或者用于命令的快捷方式")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/passwd /ect/passwd.bak\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 等同于")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/passwd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(",.bak"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"条件与分支结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#条件与分支结构"}},[s._v("#")]),s._v(" 条件与分支结构")]),s._v(" "),a("p",[a("code",[s._v("if [ 测试条件成立 ]")]),s._v("或命令返回值为 0")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" root "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root user"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("elif")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" admin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin user"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"custom user"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 也可以写作一行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$USER")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" root "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"root user"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$变量"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"start"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"START"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"started"')]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stop"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"STOP"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  \t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stoped"')]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  \t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"用法：'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${0}")]),s._v(' {start|stop}"')]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" 参数 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" 列表"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t命令\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# e.g 批量改名 a.mp3 b.mp3 c.mp3 改为mp4")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("filename")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" *.mp3"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$filename")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("basename")]),s._v(" $filename .mp3"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(".mp4\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v("变量初始化"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("循环判断条件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("变量变化"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t循环语句\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# e.g")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" 测试成立\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t命令\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# e.g")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("a")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$a")]),s._v(" -lt "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$a")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# a=`expr $a + 1` let "a=$a+1"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("until 与 while 的判断逻辑相反，如果条件为假，会执行循环体，直到条件为真")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("until")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$a")]),s._v(" -gt "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$a")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("通过循环处理命令行参数\n参数的获取：")]),s._v(" "),a("ul",[a("li",[s._v("$0, $1,$2.....${10},$n")]),s._v(" "),a("li",[s._v("$0 表示脚本的名称")]),s._v(" "),a("li",[s._v("$*和"),a("code",[s._v("$@")]),s._v("表示所有位置参数")]),s._v(" "),a("li",[a("code",[s._v("$#")]),s._v("表示参数的数量")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[s._v("pos")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pos")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"help"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n  \t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pos")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$pos")]),s._v("\n  \t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$#")]),s._v(" -gt "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"help"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("shift")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 参数左移，将第一个参数弹出，第二个参数成为第一个参数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"退出与退出状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#退出与退出状态"}},[s._v("#")]),s._v(" 退出与退出状态")]),s._v(" "),a("ul",[a("li",[s._v("exit 退出当前环境")]),s._v(" "),a("li",[a("code",[s._v("exit 10")]),s._v("退出并返回 10，返回值为非 0 表示不正常退出")]),s._v(" "),a("li",[s._v("通过"),a("code",[s._v("$?")]),s._v("可以在判断当前 shell 上一条语句是否执行正确")])]),s._v(" "),a("p",[s._v("一般用"),a("code",[s._v("test")]),s._v("命令做")]),s._v(" "),a("ul",[a("li",[s._v("文件测试，是否存在，是文件还是文件夹")]),s._v(" "),a("li",[s._v("整数比较测试")]),s._v(" "),a("li",[s._v("字符串测试")])]),s._v(" "),a("p",[s._v("等同于"),a("code",[s._v("[]")]),s._v("，扩展为"),a("code",[s._v("[[]]")]),s._v("可以支持逻辑表达式&&、||、<、>")]),s._v(" "),a("h2",{attrs:{id:"函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数"}},[s._v("#")]),s._v(" 函数")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("funcname")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t命令\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# e.g")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("cdls")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /var\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行")]),s._v("\ncdls\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("通过"),a("code",[s._v("local")]),s._v("在函数内部申明内部变量")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以忽略function")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("cdls2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$dir")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\ncdls2 /root\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("系统自建的函数位于："),a("code",[s._v("/etc/init.d/functions")])]),s._v(" "),a("h2",{attrs:{id:"捕获信号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#捕获信号"}},[s._v("#")]),s._v(" 捕获信号")]),s._v(" "),a("p",[s._v("当接收到 15 号信号的时候会打印相应的输出，但是程序不会停下来")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("trap")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo sign 15"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kill 会发送15号信号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("trap")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo sign 2"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 捕获2号信号，Ctrl+C就失效了")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("9 号信号因为是不能阻塞的，所以不能捕获")]),s._v(" "),a("h2",{attrs:{id:"计划任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#计划任务"}},[s._v("#")]),s._v(" 计划任务")]),s._v(" "),a("h3",{attrs:{id:"一次性计划任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一次性计划任务"}},[s._v("#")]),s._v(" 一次性计划任务")]),s._v(" "),a("p",[s._v("让计算机在指定的时间运行程序\n"),a("code",[s._v("at 18:30")]),s._v("\n随后在终端输入要执行的任务或者脚本")]),s._v(" "),a("blockquote",[a("p",[s._v("需要注意的是，如果是执行命令，最好输入完整的命令路径。另外运行的时候是没有终端，所以如果要输出内容，需要自己添加输出重定向")])]),s._v(" "),a("h3",{attrs:{id:"周期性任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#周期性任务"}},[s._v("#")]),s._v(" 周期性任务")]),s._v(" "),a("p",[s._v("配置方式："),a("code",[s._v("crontab -e")]),s._v("。配置存储位置："),a("code",[s._v("/var/spool/cron")]),s._v("\n查看："),a("code",[s._v("crontab -l")]),s._v("\n配置格式："),a("code",[s._v("分 时 日 月 周 执行命令")]),s._v("。可以查看"),a("a",{attrs:{href:"https://tool.lu/crontab/",target:"_blank",rel:"noopener noreferrer"}},[s._v("在线工具"),a("OutboundLink")],1),s._v("\n在"),a("code",[s._v("/var/cron")]),s._v("会有计划任务得执行日志\n计算机不一定能按时执行任务，所以会出现各种问题\nanacontab，延时计划任务，配置文件"),a("code",[s._v("/etc/cron.d/0hourly")]),s._v("、"),a("code",[s._v("/etc/anacrontab")]),s._v("\nflock 锁文件，同一时间某个脚本只运行一次，或者说只有 1 个实例\n"),a("code",[s._v('flock -xn "/tmp/f.lock" -c "/root/a.sh"')]),s._v("。"),a("code",[s._v("/tmp/f.lock")]),s._v("表示锁文件")]),s._v(" "),a("h2",{attrs:{id:"查找命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查找命令"}},[s._v("#")]),s._v(" 查找命令")]),s._v(" "),a("h3",{attrs:{id:"grep"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grep"}},[s._v("#")]),s._v(" grep")]),s._v(" "),a("p",[s._v("查找文件内容。格式："),a("code",[s._v("grep 找什么 从哪找")]),s._v("。比如")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" proxy ~/.gitconfig\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"find"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#find"}},[s._v("#")]),s._v(" find")]),s._v(" "),a("p",[s._v("查找文件，格式："),a("code",[s._v("find 目录 -name 文件名字")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" /etc -name "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("-regex")]),s._v("可以通过正则搜索")])]),s._v(" "),a("p",[s._v("删除查找到的文件："),a("code",[s._v("find *txt -exec rm -v {} \\;")]),s._v("后面的"),a("code",[s._v("\\;")]),s._v("一般是固定的")]),s._v(" "),a("h3",{attrs:{id:"sed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sed"}},[s._v("#")]),s._v(" sed")]),s._v(" "),a("p",[s._v("替换指令，格式，"),a("code",[s._v("sed '/user1/s/user1/u1' /etc/passwd")]),s._v("。默认逐行处理，每行只进行一次替换")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sed 's/old/new/' filename")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 多个替换")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sed -e 's/old/new' -e 's/old1/new1' filename filename1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 等同于")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sed 's/old/new/;s/old1/new1/' filename")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将替换结果写回到文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sed -i 's/old/new' 's/old1/new' filename filename1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 或者通过重定向符输出到其他文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sed 's/old/new/' filename > newfilename")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sed -r 's/扩展正则表达式（+？等）/new' filename")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -r "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/(a.*b)/\\1:\\1/'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 表示找到文件中的从a到b的字串，替换成两遍子串以冒号分割的格式")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("其他模式")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 替换整行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/root/!!!!/g'")]),s._v(" /etc/passwd\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 替换匹配到的第二次")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/root/!!!!/2'")]),s._v(" /etc/passwd\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对匹配的行进行打印")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/root/!!!!/p'")]),s._v(" /etc/passwd\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只对匹配的行打印")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -n "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/root/!!!!/p'")]),s._v(" /etc/passwd\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将匹配到的结果输出到文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" -n "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/root/!!!!/w /tmp/a.txt'")]),s._v(" /etc/passwd\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 限定")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/正则/s/root/!!!!/'")]),s._v(" /etc/passwd  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 只对满足正则的行进行替换")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'行号s/root/!!!!/'")]),s._v(" /etc/passwd "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定行进行替换")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'5,10s/root/!!!!/'")]),s._v(" /etc/passwd "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对第5到10行进行替换，$表示最后一行")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h3",{attrs:{id:"awk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#awk"}},[s._v("#")]),s._v(" awk")]),s._v(" "),a("p",[s._v("一般用于对文本内容进行统计，按需要的格式进行输出。默认已空格符作为分隔符\n"),a("code",[s._v("cut -d : -f 1 /etc/passwd")]),s._v(" "),a("code",[s._v("awk -F':' /正则/{print $1}' /etc/passwd")])]),s._v(" "),a("ul",[a("li",[s._v("awk 使用"),a("code",[s._v("$1")]),s._v("、"),a("code",[s._v("$2")]),s._v("..."),a("code",[s._v("$n")]),s._v("表示每一个字段\n"),a("ul",[a("li",[a("code",[s._v("awk '{print $1,$2}' filename")])])])]),s._v(" "),a("li",[a("code",[s._v("-F")]),s._v("指定自定义的分隔符\n"),a("ul",[a("li",[a("code",[s._v("awk -F':' '{print $1}' filename")]),s._v("。使用"),a("code",[s._v(":")]),s._v("作为分隔符")])])]),s._v(" "),a("li",[s._v("输出内容里面添加序号\n"),a("ul",[a("li",[a("code",[s._v("awk -F':' '{print x++,$1}' filename")])])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);