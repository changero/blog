(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{552:function(s,t,a){"use strict";a.r(t);var n=a(14),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://surge.sh/",target:"_blank",rel:"noopener noreferrer"}},[s._v("surge"),t("OutboundLink")],1),s._v("是一个用于部署静态应用的工具，通过它我们可以免费部署自己的前端静态应用")]),s._v(" "),t("h2",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("p",[s._v("首先要在本地安装 surge，通过本地 surge 来进行登录注册，以及获取 token。")]),s._v(" "),t("p",[s._v("可以直接通过 npm 来安装 surge")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i surge -g\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("安装完成以后输入"),t("code",[s._v("surge")]),s._v("命令来完成登录或者注册")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" surge\n\n Welcome to surge"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("surge.sh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   Login "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("or create surge account"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" by entering email "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" password.\n\n          email:\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("输入邮箱和密码之后完成注册或者登录")]),s._v(" "),t("h2",{attrs:{id:"本地部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#本地部署"}},[s._v("#")]),s._v(" 本地部署")]),s._v(" "),t("p",[s._v("在本地安装 surge 并登录之后，来到我们要部署的静态文件夹，直接输入"),t("code",[s._v("surge")]),s._v("就可以将当前目录部署到 surge。")]),s._v(" "),t("h2",{attrs:{id:"自定义域名"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自定义域名"}},[s._v("#")]),s._v(" 自定义域名")]),s._v(" "),t("p",[s._v("通过 surge 部署的时候，每一次会生成一个不同的二级域名。这样在更新的时候很不方便。所以我们需要自定义域名")]),s._v(" "),t("ul",[t("li",[s._v("方式一: 在部署的时候手动修改 domain")]),s._v(" "),t("li",[s._v("方式二: 在部署的时候添加"),t("code",[s._v("domain")]),s._v("参数，比如："),t("code",[s._v("surge --domain mydomain.surge.sh")])])]),s._v(" "),t("p",[s._v("当自定义域名之后，使用的仍然是 surge 的一级域名，如果想将我们自己的域名解析过去，比如访问"),t("code",[s._v("app.mydomain.com")]),s._v("就访问到我们的应用。那我们可以通过 CANME 文件来定义")]),s._v(" "),t("p",[s._v("首先在自己域名服务商处添加一条 CNAME 记录，解析地址就是我们的 surge 的地址。然后添加 CNAME 文件，文件内容就是"),t("code",[s._v("app.mydomain.com")]),s._v("，就可以了")]),s._v(" "),t("h2",{attrs:{id:"github-部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#github-部署"}},[s._v("#")]),s._v(" github 部署")]),s._v(" "),t("p",[s._v("我们可以通过 github 的 actions 功能来实现自动化部署，首先需要添加"),t("code",[s._v(".github/workflows")]),s._v("目录，目录中随便添加一个 yml 文件，这就是我们的部署文件，在流程中添加以下流程。(关于 workflows 的用法不在此处详述)")]),s._v(" "),t("p",[s._v("action"),t("a",{attrs:{href:"https://github.com/marketplace/actions/publish-to-surge-sh",target:"_blank",rel:"noopener noreferrer"}},[s._v("主页"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-YAML line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" My workflow\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("on")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" push\n\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("jobs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("my-job")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" My job\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("runs-on")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ubuntu"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("latest\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("steps")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deploy to foo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("bar.surge.sh\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dswistowski/surge"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("sh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("action@v1\n        "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("with")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("domain")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'foo-bar.surge.sh'")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("project")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.'")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("login")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" secrets.surge_login "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("token")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" secrets.surge_token "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("p",[s._v("其中，"),t("code",[s._v("domain")]),s._v("就是我们的自定义域名，"),t("code",[s._v("project")]),s._v("是部署的目录，"),t("code",[s._v("login")]),s._v("是 surge 登录邮箱，"),t("code",[s._v("token")]),s._v("需要在登录以后通过"),t("code",[s._v("surge token")]),s._v("来获取。")]),s._v(" "),t("p",[s._v("login 以及 token 需要在对应仓库的 settings 中配置"),t("code",[s._v("settings > Secrets > Actions")]),s._v(",也可以访问"),t("code",[s._v("https://github.com/[username]/[repo]/settings/secrets/actions")]),s._v("，替换对应的用户名和仓库名即可。")]),s._v(" "),t("p",[s._v("点击右上角"),t("code",[s._v("new repository secret")]),s._v(" 按钮来创建 secret")]),s._v(" "),t("p",[s._v("最后将代码推送到远程仓库即可")])])}),[],!1,null,null,null);t.default=e.exports}}]);